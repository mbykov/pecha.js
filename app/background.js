!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=56)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("lodash")},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});const r={tsek:"་"},o=["འི","ར","འོ","འམ","འི","ས","འང"]},function(e,t){e.exports=require("path")},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e){function t(){return(t=e.define()).expose({register:function(e,n){n||(n=e,e=null);var r=typeof n;if(e)t[e]=n;else if(n&&"function"===r)t.extend(n);else{if("object"!==r)throw new TypeError("extended.register must be called with an extender function");t.expose(n)}return t},define:function(){return e.define.apply(e,arguments)}}),t;var t}return t.define=function(){return e.define.apply(e,arguments)},t}(n(29)))}).call(this)},function(e,t){e.exports=require("fs")},function(e,t,n){var r=n(7),o=Object.prototype.hasOwnProperty;e.exports=n(4)().register(r).register(n(33)).register(n(35)).register("LINE_BREAK",n(37).EOL).register("asyncEach",function(e,t,n){!function n(r,o,i,s){++r<o?t(i[r],function(e){e?s(e):r%100==0?setImmediate(function(){n(r,o,i,s)}):n(r,o,i,s)}):s(null,e)}(-1,e.length,e,n)}).register("spreadArgs",function(e,t,n){var r;switch((t||[]).length){case 0:r=e.call(n);break;case 1:r=e.call(n,t[0]);break;case 2:r=e.call(n,t[0],t[1]);break;case 3:r=e.call(n,t[0],t[1],t[2]);break;default:r=e.apply(n,t)}return r}).register("keys",function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t})},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e){var t=Array.prototype.slice,n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;function o(e,t){var n=-1,r=0,o=e.length,i=[];for(n+=t=t||0;++n<o;)i[r++]=e[n];return i}function i(e){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t}function s(e,n){if(e===n)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(e)&&Buffer.isBuffer(n)){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}return m(e)&&m(n)?e.getTime()===n.getTime():_(e)&&_(n)?e.source===n.source&&e.global===n.global&&e.multiline===n.multiline&&e.lastIndex===n.lastIndex&&e.ignoreCase===n.ignoreCase:(!E(e)||!E(n)||e===n)&&("object"!=typeof e&&"object"!=typeof n?e===n:function(e,n){var r;if(h(e)||h(n))return!1;if(e.prototype!==n.prototype)return!1;if(d(e))return!!d(n)&&(e=t.call(e),n=t.call(n),s(e,n));try{var o,u=i(e),a=i(n);if(u.length!==a.length)return!1;for(u.sort(),a.sort(),o=u.length-1;o>=0;o--)if(u[o]!==a[o])return!1;for(o=u.length-1;o>=0;o--)if(r=u[o],!s(e[r],n[r]))return!1}catch(e){return!1}return!0}(e,n))}var u,a=function(e){return"[object Function]"===r.call(e)};function c(e){return null!==e&&"object"==typeof e}function l(e){return!0===e||!1===e||"[object Boolean]"===r.call(e)}function f(e){return void 0===e}function h(e){return f(e)||p(e)}function p(e){return null===e}"undefined"==typeof window||a(window.alert)||(u=window.alert,a=function(e){return"[object Function]"===r.call(e)||e===u});var d=function(e){return"[object Arguments]"===r.call(e)};function _(e){return"[object RegExp]"===r.call(e)}d(arguments)||(d=function(e){return!(!e||!n.call(e,"callee"))});var g=Array.isArray||function(e){return"[object Array]"===r.call(e)};function m(e){return"[object Date]"===r.call(e)}function E(e){return"[object String]"===r.call(e)}function v(e,t){return e==t}function w(e,t){if(g(t)&&Array.prototype.indexOf||E(t))return t.indexOf(e)>-1;if(g(t))for(var n=0,r=t.length;n<r;n++)if(v(e,t[n]))return!0;return!1}function y(e,t){return E(t)?null!==(""+e).match(t):!!_(t)&&t.test(e)}function b(e,t){return n.call(e,t)}var T={isFunction:a,isObject:c,isEmpty:function(e){return d(e)?0===e.length:c(e)?0===i(e).length:!E(e)&&!g(e)||0===e.length},isHash:function(e){return c(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},isNumber:function(e){return"[object Number]"===r.call(e)},isString:E,isDate:m,isArray:g,isBoolean:l,isUndefined:f,isDefined:function(e){return!f(e)},isUndefinedOrNull:h,isNull:p,isArguments:d,instanceOf:function(e,t){return!!a(t)&&e instanceof t},isRegExp:_,deepEqual:s,isTrue:function(e){return!0===e},isFalse:function(e){return!1===e},isNotNull:function(e){return!p(e)},isEq:v,isNeq:function(e,t){return e!=t},isSeq:function(e,t){return e===t},isSneq:function(e,t){return e!==t},isIn:w,isNotIn:function(e,t){return!w(e,t)},isLt:function(e,t){return e<t},isLte:function(e,t){return e<=t},isGt:function(e,t){return e>t},isGte:function(e,t){return e>=t},isLike:y,isNotLike:function(e,t){return!y(e,t)},contains:function(e,t){return w(t,e)},notContains:function(e,t){return!w(t,e)},has:b,notHas:function(e,t){return!b(e,t)},isLength:function(e,t){return!!b(e,"length")&&e.length===t},isNotLength:function(e,t){return!!b(e,"length")&&e.length!==t},containsAt:function(e,t,n){return!!(g(e)&&e.length>n)&&v(e[n],t)},notContainsAt:function(e,t,n){return!!g(e)&&!v(e[n],t)}},O={constructor:function(){this._testers=[]},noWrap:{tester:function(){var e=this._testers;return function(t){for(var n=!1,r=0,o=e.length;r<o&&!n;r++)n=e[r](t);return n}}}},L={constructor:function(){this._cases=[],this.__default=null},def:function(e,t){this.__default=t},noWrap:{switcher:function(){var e=this._cases,t=this.__default;return function(){for(var n,r=o(arguments),i=0,s=e.length;i<s;i++)if((n=e[i](r)).length>1&&(n[1]||n[0]))return n[1];if(t)return t.apply(this,r)}}}};function A(e){O[e]=function(){this._testers.push(T[e])}}function R(e){L[e]=function(){var t,n=o(arguments,1),r=T[e],i=!0;if(n.length<=r.length-1)throw new TypeError("A handler must be defined when calling using switch");if(l(t=n.pop())&&(i=t,t=n.pop()),!a(t))throw new TypeError("handler must be defined");this._cases.push(function(e){return r.apply(T,e.concat(n))?[i,t.apply(this,e)]:[!1]})}}for(var C in T)n.call(T,C)&&(R(C),A(C));var M=e.define(T).expose(T);return M.tester=e.define(O),M.switcher=e.define(L),M}(n(4)))}).call(this)},function(e,t){e.exports=require("speckled-band")},function(e,t){e.exports=require("stream")},function(e){e.exports={name:"development",description:"Add here any environment specific stuff you like."}},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("electron-settings")},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e,t,n){var r=t.isString,o=Array.isArray||t.isArray,i=t.isDate,s=Math.floor,u=Math.abs,a=(Math.max,Math.min),c=Array.prototype,l=(c.indexOf,c.forEach),f=c.map,h=c.reduce,p=c.reduceRight,d=c.filter,_=c.every,g=c.some,m=n.argsToArray;function E(e,t){var n,r,o=[],i=-1;for(r=e.length;++i<r;)-1!==T(t,n=e[i])&&o.push(n);return o}var v,w,y,b=(v=function(e,t){return A(e,t)},w=function(e,t){return e-t},y=function(e,t){return e.getTime()-t.getTime()},function(e,t){var n=[];return o(e)&&(n=e.slice(),t?"function"==typeof t?n.sort(t):n.sort(function(e,n){var o=e[t],s=n[t];return r(o)&&r(s)?o>s?1:o<s?-1:0:i(o)&&i(s)?o.getTime()-s.getTime():o-s}):v(n,r)?n.sort():v(n,i)?n.sort(y):n.sort(w)),n});function T(e,t,n){for(var r=(n||0)-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function O(e,t,n){if(e&&d&&d===e.filter)return e.filter(t,n);if(!o(e)||"function"!=typeof t)throw new TypeError;for(var r=Object(e),i=r.length>>>0,s=[],u=0;u<i;u++)if(u in r){var a=r[u];t.call(n,a,u,r)&&s.push(a)}return s}function L(e,t,n){if(!o(e)||"function"!=typeof t)throw new TypeError;if(e&&l&&l===e.forEach)return e.forEach(t,n),e;for(var r=0,i=e.length;r<i;++r)t.call(n||e,e[r],r,e);return e}function A(e,t,n){if(e&&_&&_===e.every)return e.every(t,n);if(!o(e)||"function"!=typeof t)throw new TypeError;for(var r=Object(e),i=r.length>>>0,s=0;s<i;s++)if(s in r&&!t.call(n,r[s],s,r))return!1;return!0}function R(e,t,n){if(e&&f&&f===e.map)return e.map(t,n);if(!o(e)||"function"!=typeof t)throw new TypeError;for(var r=Object(e),i=r.length>>>0,s=[],u=0;u<i;u++)u in r&&s.push(t.call(n,r[u],u,r));return s}function C(e,t,n){var r=arguments.length>2;if(e&&h&&h===e.reduce)return r?e.reduce(t,n):e.reduce(t);if(!o(e)||"function"!=typeof t)throw new TypeError;var i=0,s=e.length>>0;if(arguments.length<3){if(0===s)throw new TypeError("Array length is 0 and no second argument");n=e[0],i=1}else n=arguments[2];for(;i<s;)i in e&&(n=t.call(void 0,n,e[i],i,e)),++i;return n}function M(e,t,n){var r=arguments.length>2;if(e&&p&&p===e.reduceRight)return r?e.reduceRight(t,n):e.reduceRight(t);if(!o(e)||"function"!=typeof t)throw new TypeError;var i=Object(e),s=i.length>>>0;if(0===s&&2===arguments.length)throw new TypeError;var u=s-1;if(arguments.length>=3)n=arguments[2];else for(;;)if(u in e){n=e[u--];break}for(;u>=0;)u in i&&(n=t.call(void 0,n,i[u],u,i)),u--;return n}function D(e){var n=[];if(null!==e){var r=m(arguments);if(1===r.length)if(o(e))n=e;else if(t.isHash(e))for(var i in e)e.hasOwnProperty(i)&&n.push([i,e[i]]);else n.push(e);else L(r,function(e){n=n.concat(D(e))})}return n}function S(e){return(e=e||[]).length?C(e,function(e,t){return e+t}):0}function I(e){var t,n=[],r=-1,o=0;if(e)for(t=e.length;++r<t;){var i=e[r];-1===T(n,i)&&(n[o++]=i)}return n}function x(e,t){var n=e.slice();return"number"!=typeof t&&(t=1),t&&o(e)?(t>0?(n.push(n.shift()),t--):(n.unshift(n.pop()),t++),x(n,t)):n}function N(e){var t=m(arguments);return C(t.length>1?t:D(e),function(e,t){return e.concat(t)},[])}var U={toArray:D,sum:S,avg:function(e){if((e=e||[]).length){var n=S(e);if(t.isNumber(n))return n/e.length;throw new Error("Cannot average an array of non numbers.")}return 0},sort:function(e,t){return b(e,t)},min:function(e,t){return b(e,t)[0]},max:function(e,t){return b(e,t)[e.length-1]},difference:function(e){var t=e,n=N(m(arguments,1));return o(e)&&(t=O(e,function(e){return-1===T(n,e)})),t},removeDuplicates:I,unique:function(e){return I(e)},rotate:x,permutations:function(e,t){var n=[];if(o(e)){var r=e.slice(0);"number"!=typeof t&&(t=e.length),t?t<=e.length&&(n=C(e,function(e,n,o){var i;return i=t>1?function(e,t,n){for(var r=[],o=0;o<t.length;o++)r.push([e].concat(x(t,o)).slice(0,n));return r}(n,x(r,o).slice(1),t):[[n]],e.concat(i)},[])):n=[[]]}return n},zip:function(){var e=[],n=m(arguments);if(n.length>1){var r=n.shift();o(r)&&(e=C(r,function(e,r,i){for(var s=[r],u=0;u<n.length;u++){var a=n[u];o(a)&&!t.isUndefined(a[i])?s.push(a[i]):s.push(null)}return e.push(s),e},[]))}return e},transpose:function(e){var t,n=[];return o(e)&&e.length&&L(e,function(e){!o(e)||t&&e.length!==t.length||(L(e,function(e,t){n[t]||(n[t]=[]),n[t].push(e)}),t=e)}),n},valuesAt:function(e,t){var n=[];if(e=(t=m(arguments)).shift(),o(e)&&t.length)for(var r=0,i=t.length;r<i;r++)n.push(e[t[r]]||null);return n},union:function(){var e=[],t=m(arguments);if(t.length>1){for(var n=0,r=t.length;n<r;n++)e=e.concat(t[n]);e=I(e)}return e},intersect:function(){var e,t,n=[],r=-1;if(e=arguments.length>1?m(arguments):arguments[0],o(e))for(n=e[0],r=0,t=e.length;++r<t;)n=E(n,e[r]);return I(n)},powerSet:function(e){var t=[];return o(e)&&e.length&&(t=C(e,function(e,t){var n=R(e,function(e){return e.concat(t)});return e.concat(n)},[[]])),t},cartesian:function e(t,n){var r,i,s=[];return o(t)&&o(n)&&t.length&&n.length&&(s=(r=t[0],i=n,M(i,function(e,t){return o(t)||(t=[t]),t.unshift(r),e.unshift(t),e},[])).concat(e(t.slice(1),n))),s},compact:function(e){var n=[];return o(e)&&e.length&&(n=O(e,function(e){return!t.isUndefinedOrNull(e)})),n},multiply:function(e,n){(n=t.isNumber(n)?n:1)||(n=1),e=D(e||[]);for(var r=[],o=0;++o<=n;)r=r.concat(e);return r},flatten:N,pluck:function(e,t){t=t.split(".");var n=e.slice(0);return L(t,function(e){var t=e.match(/(\w+)\(\)$/);n=R(n,function(n){return t?n[t[1]]():n[e]})}),n},invoke:function(e,t,n){return n=m(arguments,2),R(e,function(e){return(r(t)?e[t]:t).apply(e,n)})},forEach:L,map:R,filter:O,reduce:C,reduceRight:M,some:function(e,t,n){if(e&&g&&g===e.some)return e.some(t,n);if(!o(e)||"function"!=typeof t)throw new TypeError;for(var r=Object(e),i=r.length>>>0,s=0;s<i;s++)if(s in r&&t.call(n,r[s],s,r))return!0;return!1},every:A,indexOf:T,lastIndexOf:function(e,t,n){if(!o(e))throw new TypeError;var r=Object(e),i=r.length>>>0;if(0===i)return-1;var c=i;arguments.length>2&&((c=Number(arguments[2]))!=c?c=0:0!==c&&c!==1/0&&c!==-1/0&&(c=(c>0||-1)*s(u(c))));for(var l=c>=0?a(c,i-1):i-u(c);l>=0;l--)if(l in r&&r[l]===t)return l;return-1}};return e.define(o,U).expose(U)}(n(4),n(7),n(34)))}).call(this)},function(e,t){e.exports=require("electron-is-dev")},,function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("pouchdb")},function(e,t){e.exports=require("inherits")},function(e,t){e.exports=require("readable-stream")},,,function(e,t){e.exports=require("url")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.csv2pouch=function(e,t){var n=r.readJsonSync(e);n._id="description";var a=s.parse(e).dir,c=(s.parse(e).name,[s.parse(e).name,"csv"].join(".")),l=s.resolve(a,c),f=r.createReadStream(l);r.emptyDirSync(t);var h=new u(t);h.put(n);var p=i({comment:"#",trim:!0,ignoreEmpty:!0}).on("end",function(){}),d=o.through.obj(function(e,t,n){var r={_id:e[0],trns:e.slice(1).join("").trim().split("; ")};n(null,r)});return f.pipe(p).pipe(d).pipe(h.createWriteStream())};console.log;var r=n(16),o=n(25),i=n(26),s=n(3),u=n(17);u.plugin(n(44))},,function(e,t){e.exports=require("mississippi")},function(e,t,n){e.exports=n(27)},function(e,t,n){n(5);var r=n(28),o=n(41);function i(){return r.apply(void 0,arguments)}i.parse=i,i.fromString=r.fromString,i.fromPath=r.fromPath,i.fromStream=r.fromStream,i.format=o,i.write=o.write,i.writeToStream=o.writeToStream,i.writeToString=o.writeToString,i.writeToBuffer=o.writeToBuffer,i.writeToPath=o.writeToPath,i.createWriteStream=o.createWriteStream,i.createReadStream=o.createWriteStream,e.exports=i},function(e,t,n){n(6),process.stdout;var r=n(9),o=n(5),i=n(38);function s(e){return new i(e)}s.fromStream=function(e,t){return e.pipe(new i(t))},s.fromPath=function(e,t){return o.createReadStream(e).pipe(new i(t))},s.fromString=function(e,t){var n=new r.Readable;return n.push(e),n.push(null),n.pipe(new i(t))},e.exports=s},function(e,t,n){e.exports=n(30)},function(e,t,n){(function(){e.exports&&(e.exports=function(e){var t,n=Array.prototype.slice;function r(e,t){if(e&&e.length)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var o=function(){function e(e,t,n){var o,i;for(o in t)t.hasOwnProperty(o)&&-1===r(n,o)&&(i=t[o],o in e&&e[o]===i||(e[o]=i));return e}return function(t){t||(t={});var n=arguments.length,r=arguments[arguments.length-1];!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(r)?r=[]:n--;for(var o=1;o<n;o++)e(t,arguments[o],r);return t}}();function i(r){r=r||[];var i=e({instance:{constructor:function(e){this._value=e},value:function(){return this._value},eq:function(e){return this.__extender__(this._value===e)},neq:function(e){return this.__extender__(this._value!==e)},print:function(){return console.log(this._value),this}}}),s=[];function u(e,r,o){if("function"!=typeof o)throw new TypeError("when extending type you must provide a function");var i;i="constructor"===r?function(){this._super(arguments),o.apply(this,arguments)}:function(){var e=n.call(arguments);e.unshift(this._value);var r=o.apply(this,e);return r!==t?this.__extender__(r):this},e[r]=i}function a(e,t,r){if("function"!=typeof r)throw new TypeError("when extending type you must provide a function");var o;o="constructor"===t?function(){this._super(arguments),r.apply(this,arguments)}:function(){var e=n.call(arguments);return e.unshift(this._value),r.apply(this,e)},e[t]=o}function c(e){var t,n,r=e;if(!(e instanceof i)){var o=i;for(t=0,n=s.length;t<n;t++){var u=s[t];u[0](e)&&(o=o.extend({instance:u[1]}))}(r=new o(e)).__extender__=c}return r}function l(){return!0}return c.define=function(e,t){if(arguments.length){"object"==typeof e&&(t=e,e=l);var n={};!function e(t,n,r){for(var o in n)n.hasOwnProperty(o)&&("getters"!==o&&"setters"!==o?"noWrap"===o?e(t,n[o],!0):r?a(t,o,n[o]):u(t,o,n[o]):t[o]=n[o])}(n,t=t||{}),n.hasOwnProperty("constructor")||(t.hasOwnProperty("constructor")?u(n,"constructor",t.constructor):n.constructor=function(){this._super(arguments)}),s.push([e,n])}return c},c.extend=function(e){return e&&e.hasOwnProperty("__defined__")&&(c.__defined__=s=s.concat(e.__defined__)),o(c,e,["define","extend","expose","__defined__"]),c},c.expose=function(){for(var e,t=0,n=arguments.length;t<n;t++)"object"==typeof(e=arguments[t])&&o(c,e,["define","extend","expose","__defined__"]);return c},c.__defined__=s,c}return{define:function(){return i().define.apply(i,arguments)},extend:function(e){return i().define().extend(e)}}}(n(31)))}).call(this)},function(e,t,n){e.exports=n(32)},function(e,t,n){!function(){e.exports&&(e.exports=function(){var e,t=Array.prototype.slice,n=0,r=new Function,o=/(super)/g;function i(e,n){return n=n||0,t.call(e,n)}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){return function(e){return null!=e&&"object"==typeof e}(e)&&e.constructor===Object}var a=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)};function c(e,t){if(e&&e.length)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function l(e,t,n){var r,o;for(r in t)t.hasOwnProperty(r)&&-1===c(n,r)&&(o=t[r],r in e&&e[r]===o||(e[r]=o));return e}function f(e,t){var n=this.__meta,r=n.supers,o=r.length,i=n.superMeta,u=i.pos;if(o>u){e=e?a(e)||s(e)?e:[e]:[];var c,l=i.name,f=i.f;do{if("function"==typeof(c=r[u][l])&&(c=c._f||c)!==f)return i.pos=1+u,c.apply(this,e)}while(o>++u)}return null}function h(){var e=this.__meta,t=e.supers,n=t.length,r=e.superMeta,o=r.pos;if(n>o){var i,s=r.name,u=r.f;do{if("function"==typeof(i=t[o][s])&&(i=i._f||i)!==u)return r.pos=1+o,i.bind(this)}while(n>++o)}return null}function p(e){var t=this.__getters__;return t.hasOwnProperty(e)?t[e].apply(this):this[e]}function d(e,t){var n=this.__setters__;if(!u(e))return n.hasOwnProperty(e)?n[e].apply(this,i(arguments,1)):this[e]=t;for(var r in e){var o=e[r];n.hasOwnProperty(r)?n[e].call(this,o):this[r]=o}}function _(){var e=this.__meta||{},t=e.supers,n=t.length,r=e.superMeta,o=r.pos;if(n>o){var i,s=r.name,u=r.f;do{if("function"==typeof(i=t[o][s])&&(i=i._f||i)!==u)return r.pos=1+o,i.apply(this,arguments)}while(n>++o)}return null}function g(e,t){if(e.toString().match(o)){var n=function(){var n,r=this.__meta||{},o=r.superMeta;switch(r.superMeta={f:e,pos:0,name:t},arguments.length){case 0:n=e.call(this);break;case 1:n=e.call(this,arguments[0]);break;case 2:n=e.call(this,arguments[0],arguments[1]);break;case 3:n=e.call(this,arguments[0],arguments[1],arguments[2]);break;default:n=e.apply(this,arguments)}return r.superMeta=o,n};return n._f=e,n}return e._f=e,e}function m(e,t){var n=t.setters||{},r=e.__setters__,o=e.__getters__;for(var i in n)r.hasOwnProperty(i)||(r[i]=n[i]);for(i in n=t.getters||{})o.hasOwnProperty(i)||(o[i]=n[i]);for(var s in t)if("getters"!==s&&"setters"!==s){var u=t[s];"function"==typeof u?e.hasOwnProperty(s)||(e[s]=g(_,s)):e[s]=u}}function E(){for(var e=i(arguments),t=e.length,n=this.prototype,r=n.__meta,o=this.__meta,s=n.__meta.bases,u=s.slice(),a=o.supers||[],c=r.supers||[],l=0;l<t;l++){var f=e[l],h=f.prototype,p=h.__meta,d=f.__meta;!p&&(p=h.__meta={proto:h||{}}),!d&&(d=f.__meta={proto:f.__proto__||{}}),m(n,p.proto||{}),m(this,d.proto||{}),v(f.prototype,c,s),v(f,a,u)}return this}function v(e,t,r){var o=e.__meta;!o&&(o=e.__meta={});var i=e.__meta.unique;if(!i&&(o.unique="declare"+ ++n),-1===c(r,i)){r.push(i);for(var s=e.__meta.supers||[],u=s.length-1||0;u>=0;)v(s[u--],t,r);t.unshift(e)}}function w(e,t){var n=t.setters,r=e.__setters__,o=e.__getters__;if(n)for(var i in n)r[i]=n[i];if(n=t.getters||{})for(i in n)o[i]=n[i];for(i in t)if("getters"!=i&&"setters"!=i){var s=t[i];"function"==typeof s?(s.__meta||{}).isConstructor?e[i]=s:e[i]=g(s,i):e[i]=s}}function y(t,o,i){var a={},c=[],p="declare"+ ++n,d=[],m=[],y=[],b=[],T={supers:y,unique:p,bases:d,superMeta:{f:null,pos:0,name:null}},O={supers:b,unique:p,bases:m,isConstructor:!0,superMeta:{f:null,pos:0,name:null}};if(u(o)&&!i&&(i=o,o=e),"function"==typeof o||s(o)?(o=(c=s(o)?o:[o]).shift(),t.__meta=O,(a=function(e){r.prototype=e.prototype;var t=new r;return r.prototype=null,t}(o)).__meta=T,a.__getters__=l({},a.__getters__||{}),a.__setters__=l({},a.__setters__||{}),t.__getters__=l({},t.__getters__||{}),t.__setters__=l({},t.__setters__||{}),v(o.prototype,y,d),v(o,b,m)):(t.__meta=O,a.__meta=T,a.__getters__=a.__getters__||{},a.__setters__=a.__setters__||{},t.__getters__=t.__getters__||{},t.__setters__=t.__setters__||{}),t.prototype=a,i){var L=T.proto=i.instance||{},A=O.proto=i.static||{};A.init=A.init||_,w(a,L),w(t,A),L.hasOwnProperty("constructor")?a.constructor=g(L.constructor,"constructor"):a.constructor=L.constructor=g(_,"constructor")}else T.proto={},O.proto={},t.init=g(_,"init"),a.constructor=g(_,"constructor");c.length&&E.apply(t,c),o&&l(t,l(l({},o),t)),a._super=t._super=f,a._getSuper=t._getSuper=h,a._static=t}function b(e,t){function n(){switch(arguments.length){case 0:this.constructor.call(this);break;case 1:this.constructor.call(this,arguments[0]);break;case 2:this.constructor.call(this,arguments[0],arguments[1]);break;case 3:this.constructor.call(this,arguments[0],arguments[1],arguments[2]);break;default:this.constructor.apply(this,arguments)}}return y(n,e,t),n.init()||n}return a(arguments)||(a=function(e){return!(!e||!e.hasOwnProperty("callee"))}),e=b({instance:{get:p,set:d},static:{get:p,set:d,mixin:E,extend:function(e){return b(this,e)},as:function(e,t){return e&&t?e[t]=this:e.exports=e=this,this}}}),b.singleton=function(e,t){var n;function r(){return n||(this.constructor.apply(this,arguments),n=this),n}return y(r,e,t),r.init()||r},b}())}()},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e,t,n){var r=t.deepEqual,o=t.isString,i=t.isHash,s=n.difference,u=Object.prototype.hasOwnProperty,a=t.isFunction;function c(e,t){var n,r;for(n in t)u.call(t,n)&&(r=t[n],n in e&&e[n]===r||(e[n]=r));return e}function l(e,t){var n,o,s;for(n in t)u.call(t,n)&&(o=t[n],s=e[n],r(s,o)||(i(s)&&i(o)?e[n]=l(s,o):i(o)?e[n]=l({},o):e[n]=o));return e}function f(e){e||(e={});for(var t=1,n=arguments.length;t<n;t++)c(e,arguments[t]);return e}function h(e,t){return f(e.prototype||e,t),e}function p(e){if(!i(e))throw new TypeError;var t=[];for(var n in e)u.call(e,n)&&t.push(n);return t}function d(e,t){if(!i(e))throw new TypeError;o(t)&&(t=[t]);for(var n,r=s(p(e),t),u={},a=0,c=r.length;a<c;++a)u[n=r[a]]=e[n];return u}var _={forEach:function(e,t,n){if(!i(e)||!a(t))throw new TypeError;for(var r,o=p(e),s=0,u=o.length;s<u;++s)r=o[s],t.call(n||e,e[r],r,e);return e},filter:function(e,t,n){if(!i(e)||!a(t))throw new TypeError;for(var r,o,s=p(e),u={},c=0,l=s.length;c<l;++c)o=e[r=s[c]],t.call(n||e,o,r,e)&&(u[r]=o);return u},invert:function(e){if(!i(e))throw new TypeError;for(var t,n=p(e),r={},o=0,s=n.length;o<s;++o)r[e[t=n[o]]]=t;return r},values:function(e){if(!i(e))throw new TypeError;for(var t=p(e),n=[],r=0,o=t.length;r<o;++r)n.push(e[t[r]]);return n},toArray:function(e){if(!i(e))throw new TypeError;for(var t,n=p(e),r=[],o=0,s=n.length;o<s;++o)t=n[o],r.push([t,e[t]]);return r},keys:p,omit:d},g={extend:h,merge:f,deepMerge:function(e){e||(e={});for(var t=1,n=arguments.length;t<n;t++)l(e,arguments[t]);return e},omit:d},m=e.define(t.isObject,g).define(i,_).define(t.isFunction,{extend:h}).expose({hash:_}).expose(g),E=m.extend;return m.extend=function(){if(1===arguments.length)return E.extend.apply(m,arguments);h.apply(null,arguments)},m}(n(4),n(7),n(13)))}).call(this)},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e,t){Array.prototype.slice;var n=t.isArguments;function r(e,t){var n=-1,r=0,o=e.length,i=[];for(n+=t=t||0;++n<o;)i[r++]=e[n];return i}return e.define(n,{toArray:r}).expose({argsToArray:r})}(n(4),n(7)))}).call(this)},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e,t,n,r){var o;"undefined"==typeof JSON?function(){function e(e){return e<10?"0"+e:e}var n,r,i,s=t.tester().isString().isNumber().isBoolean().tester(),u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function c(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function l(o,u){var a,f,h,p,d,_,g=n,m=u[o];switch(m&&(_=m,m=t.isDate(_)?isFinite(_.valueOf())?_.getUTCFullYear()+"-"+e(_.getUTCMonth()+1)+"-"+e(_.getUTCDate())+"T"+e(_.getUTCHours())+":"+e(_.getUTCMinutes())+":"+e(_.getUTCSeconds())+"Z":null:s(_)?_.valueOf():_),"function"==typeof i&&(m=i.call(u,o,m)),typeof m){case"string":return c(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(n+=r,d=[],"[object Array]"===Object.prototype.toString.apply(m)){for(p=m.length,a=0;a<p;a+=1)d[a]=l(a,m)||"null";return h=0===d.length?"[]":n?"[\n"+n+d.join(",\n"+n)+"\n"+g+"]":"["+d.join(",")+"]",n=g,h}if(i&&"object"==typeof i)for(p=i.length,a=0;a<p;a+=1)"string"==typeof i[a]&&(h=l(f=i[a],m))&&d.push(c(f)+(n?": ":":")+h);else for(f in m)Object.prototype.hasOwnProperty.call(m,f)&&(h=l(f,m))&&d.push(c(f)+(n?": ":":")+h);return h=0===d.length?"{}":n?"{\n"+n+d.join(",\n"+n)+"\n"+g+"}":"{"+d.join(",")+"}",n=g,h}}o=function(e,t,o){var s;if(n="",r="","number"==typeof o)for(s=0;s<o;s+=1)r+=" ";else"string"==typeof o&&(r=o);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return l("",{"":e})}}():o=JSON.stringify;var i=t.isHash,s=Array.prototype.slice,u=/%((?:-?\+?.?\d*)?|(?:\[[^\[|\]]*\]))?([sjdDZ])/g,a=/\{(?:\[([^\[|\]]*)\])?(\w+)\}/g,c=/(-?)(\+?)([A-Z|a-z|\W]?)([1-9][0-9]*)?$/,l=/([1-9][0-9]*)$/g;function f(e,t){var n=e;if(c.test(t)){var r=t.match(c),o=r[1],i=r[3],s=r[4];s&&(s=parseInt(s,10),n=n.length<s?_(n,s,i,o):g(n,s))}return n}function h(e,n){var r;if(!t.isNumber(e))throw new Error("stringExtended.format : when using %d the parameter must be a number!");if(r=""+e,c.test(n)){var o=n.match(c),i=o[1],s=o[2],u=o[3],a=o[4];s&&(r=(e>0?"+":"")+r),a&&(a=parseInt(a,10),r=r.length<a?_(r,a,u||"0",i):g(r,a))}return r}function p(e,t){var n,r=t.match(l),i=0;r&&(i=parseInt(r[0],10),isNaN(i)&&(i=0));try{n=o(e,null,i)}catch(t){throw new Error("stringExtended.format : Unable to parse json from ",e)}return n}var d={bold:1,bright:1,italic:3,underline:4,blink:5,inverse:7,crossedOut:9,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,redBackground:41,greenBackground:42,yellowBackground:43,blueBackground:44,magentaBackground:45,cyanBackground:46,whiteBackground:47,encircled:52,overlined:53,grey:90,black:90};function _(e,t,n,r){n=n||" ";for(var o=(e=""+e).length;o<t;)r?e+=n:e=n+e,o++;return e}function g(e,n,r){var o=e;if(t.isString(o)){if(e.length>n)if(r){var i=e.length;o=e.substring(i-n,i)}else o=e.substring(0,n)}else o=g(""+o,n);return o}function m(e,n){var r,o,i;if(n)if(t.isArray(e))for(r=[],o=0,i=e.length;o<i;o++)r.push(m(e[o],n));else if(n instanceof Array)for(r=e,o=0,i=n.length;o<i;o++)r=m(r,n[o]);else n in d&&(r="["+d[n]+"m"+e+"[0m");return r}var E={toArray:function(e,t){var n=[];return e&&(e.indexOf(t)>0?n=e.replace(/\s+/g,"").split(t):n.push(e)),n},pad:_,truncate:g,multiply:function(e,t){var n=[];if(t)for(var r=0;r<t;r++)n.push(e);return n.join("")},format:function e(r,c){if(c instanceof Array){var l=0,d=c.length;return r.replace(u,function(e,t,r){var i,s;if(!(l<d))return e;if(i=c[l++],"%s"===e||"%d"===e||"%D"===e)s=i+"";else if("%Z"===e)s=i.toUTCString();else if("%j"===e)try{s=o(i)}catch(e){throw new Error("stringExtended.format : Unable to parse json from ",i)}else switch(t=t.replace(/^\[|\]$/g,""),r){case"s":s=f(i,t);break;case"d":s=h(i,t);break;case"j":s=p(i,t);break;case"D":s=n.format(i,t);break;case"Z":s=n.format(i,t,!0)}return s})}return i(c)?r.replace(a,function(e,r,o){if(o=c[o],!t.isUndefined(o)){if(!r)return""+o;if(t.isString(o))return f(o,r);if(t.isNumber(o))return h(o,r);if(t.isDate(o))return n.format(o,r);if(t.isObject(o))return p(o,r)}return e}):e(r,s.call(arguments).slice(1))},style:m,escape:function(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return t&&-1!==r.indexOf(t,e)?e:"\\"+e})},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},trimLeft:function(e){return e.replace(/^\s*/,"")},trimRight:function(e){return e.replace(/\s*$/,"")},isEmpty:function(e){return 0===e.length}};return e.define(t.isString,E).define(t.isArray,{style:m}).expose(E).expose({characters:{SMILEY:"☺",SOLID_SMILEY:"☻",HEART:"♥",DIAMOND:"♦",CLOVE:"♣",SPADE:"♠",DOT:"•",SQUARE_CIRCLE:"◘",CIRCLE:"○",FILLED_SQUARE_CIRCLE:"◙",MALE:"♂",FEMALE:"♀",EIGHT_NOTE:"♪",DOUBLE_EIGHTH_NOTE:"♫",SUN:"☼",PLAY:"►",REWIND:"◄",UP_DOWN:"↕",PILCROW:"¶",SECTION:"§",THICK_MINUS:"▬",SMALL_UP_DOWN:"↨",UP_ARROW:"↑",DOWN_ARROW:"↓",RIGHT_ARROW:"→",LEFT_ARROW:"←",RIGHT_ANGLE:"∟",LEFT_RIGHT_ARROW:"↔",TRIANGLE:"▲",DOWN_TRIANGLE:"▼",HOUSE:"⌂",C_CEDILLA:"Ç",U_UMLAUT:"ü",E_ACCENT:"é",A_LOWER_CIRCUMFLEX:"â",A_LOWER_UMLAUT:"ä",A_LOWER_GRAVE_ACCENT:"à",A_LOWER_CIRCLE_OVER:"å",C_LOWER_CIRCUMFLEX:"ç",E_LOWER_CIRCUMFLEX:"ê",E_LOWER_UMLAUT:"ë",E_LOWER_GRAVE_ACCENT:"è",I_LOWER_UMLAUT:"ï",I_LOWER_CIRCUMFLEX:"î",I_LOWER_GRAVE_ACCENT:"ì",A_UPPER_UMLAUT:"Ä",A_UPPER_CIRCLE:"Å",E_UPPER_ACCENT:"É",A_E_LOWER:"æ",A_E_UPPER:"Æ",O_LOWER_CIRCUMFLEX:"ô",O_LOWER_UMLAUT:"ö",O_LOWER_GRAVE_ACCENT:"ò",U_LOWER_CIRCUMFLEX:"û",U_LOWER_GRAVE_ACCENT:"ù",Y_LOWER_UMLAUT:"ÿ",O_UPPER_UMLAUT:"Ö",U_UPPER_UMLAUT:"Ü",CENTS:"¢",POUND:"£",YEN:"¥",CURRENCY:"¤",PTS:"₧",FUNCTION:"ƒ",A_LOWER_ACCENT:"á",I_LOWER_ACCENT:"í",O_LOWER_ACCENT:"ó",U_LOWER_ACCENT:"ú",N_LOWER_TILDE:"ñ",N_UPPER_TILDE:"Ñ",A_SUPER:"ª",O_SUPER:"º",UPSIDEDOWN_QUESTION:"¿",SIDEWAYS_L:"⌐",NEGATION:"¬",ONE_HALF:"½",ONE_FOURTH:"¼",UPSIDEDOWN_EXCLAMATION:"¡",DOUBLE_LEFT:"«",DOUBLE_RIGHT:"»",LIGHT_SHADED_BOX:"░",MEDIUM_SHADED_BOX:"▒",DARK_SHADED_BOX:"▓",VERTICAL_LINE:"│",MAZE__SINGLE_RIGHT_T:"┤",MAZE_SINGLE_RIGHT_TOP:"┐",MAZE_SINGLE_RIGHT_BOTTOM_SMALL:"┘",MAZE_SINGLE_LEFT_TOP_SMALL:"┌",MAZE_SINGLE_LEFT_BOTTOM_SMALL:"└",MAZE_SINGLE_LEFT_T:"├",MAZE_SINGLE_BOTTOM_T:"┴",MAZE_SINGLE_TOP_T:"┬",MAZE_SINGLE_CENTER:"┼",MAZE_SINGLE_HORIZONTAL_LINE:"─",MAZE_SINGLE_RIGHT_DOUBLECENTER_T:"╡",MAZE_SINGLE_RIGHT_DOUBLE_BL:"╛",MAZE_SINGLE_RIGHT_DOUBLE_T:"╢",MAZE_SINGLE_RIGHT_DOUBLEBOTTOM_TOP:"╖",MAZE_SINGLE_RIGHT_DOUBLELEFT_TOP:"╕",MAZE_SINGLE_LEFT_DOUBLE_T:"╞",MAZE_SINGLE_BOTTOM_DOUBLE_T:"╧",MAZE_SINGLE_TOP_DOUBLE_T:"╤",MAZE_SINGLE_TOP_DOUBLECENTER_T:"╥",MAZE_SINGLE_BOTTOM_DOUBLECENTER_T:"╨",MAZE_SINGLE_LEFT_DOUBLERIGHT_BOTTOM:"╘",MAZE_SINGLE_LEFT_DOUBLERIGHT_TOP:"╒",MAZE_SINGLE_LEFT_DOUBLEBOTTOM_TOP:"╓",MAZE_SINGLE_LEFT_DOUBLETOP_BOTTOM:"╙",MAZE_SINGLE_LEFT_TOP:"Γ",MAZE_SINGLE_RIGHT_BOTTOM:"╜",MAZE_SINGLE_LEFT_CENTER:"╟",MAZE_SINGLE_DOUBLECENTER_CENTER:"╫",MAZE_SINGLE_DOUBLECROSS_CENTER:"╪",MAZE_DOUBLE_LEFT_CENTER:"╣",MAZE_DOUBLE_VERTICAL:"║",MAZE_DOUBLE_RIGHT_TOP:"╗",MAZE_DOUBLE_RIGHT_BOTTOM:"╝",MAZE_DOUBLE_LEFT_BOTTOM:"╚",MAZE_DOUBLE_LEFT_TOP:"╔",MAZE_DOUBLE_BOTTOM_T:"╩",MAZE_DOUBLE_TOP_T:"╦",MAZE_DOUBLE_LEFT_T:"╠",MAZE_DOUBLE_HORIZONTAL:"═",MAZE_DOUBLE_CROSS:"╬",SOLID_RECTANGLE:"█",THICK_LEFT_VERTICAL:"▌",THICK_RIGHT_VERTICAL:"▐",SOLID_SMALL_RECTANGLE_BOTTOM:"▄",SOLID_SMALL_RECTANGLE_TOP:"▀",PHI_UPPER:"Φ",INFINITY:"∞",INTERSECTION:"∩",DEFINITION:"≡",PLUS_MINUS:"±",GT_EQ:"≥",LT_EQ:"≤",THEREFORE:"⌠",SINCE:"∵",DOESNOT_EXIST:"∄",EXISTS:"∃",FOR_ALL:"∀",EXCLUSIVE_OR:"⊕",BECAUSE:"⌡",DIVIDE:"÷",APPROX:"≈",DEGREE:"°",BOLD_DOT:"∙",DOT_SMALL:"·",CHECK:"√",ITALIC_X:"✗",SUPER_N:"ⁿ",SQUARED:"²",CUBED:"³",SOLID_BOX:"■",PERMILE:"‰",REGISTERED_TM:"®",COPYRIGHT:"©",TRADEMARK:"™",BETA:"β",GAMMA:"γ",ZETA:"ζ",ETA:"η",IOTA:"ι",KAPPA:"κ",LAMBDA:"λ",NU:"ν",XI:"ξ",OMICRON:"ο",RHO:"ρ",UPSILON:"υ",CHI_LOWER:"φ",CHI_UPPER:"χ",PSI:"ψ",ALPHA:"α",ESZETT:"ß",PI:"π",SIGMA_UPPER:"Σ",SIGMA_LOWER:"σ",MU:"µ",TAU:"τ",THETA:"Θ",OMEGA:"Ω",DELTA:"δ",PHI_LOWER:"φ",EPSILON:"ε"}})}(n(4),n(7),n(36),n(13)))}).call(this)},function(e,t,n){(function(){"use strict";e.exports&&(e.exports=function(e,t,n){function r(e,t,n,r){n=n||" ";for(var o=(e=""+e).length;o<t;)r?e+=n:e=n+e,o++;return e}var o=function(){var e=Math.floor,t=Math.round,n={day:function(e,t){return[t,"Date",!1]},weekday:function(e,t){var n,r,o=t%5,i=e.getDay(),s=0;o?(n=o,r=parseInt(t/5,10)):(n=t>0?5:-5,r=t>0?(t-5)/5:(t+5)/5),6===i&&t>0?s=1:0===i&&t<0&&(s=-1);var u=i+n;return 0!==u&&6!==u||(s=t>0?2:-2),[7*r+n+s,"Date",!1]},year:function(e,t){return[t,"FullYear",!0]},week:function(e,t){return[7*t,"Date",!1]},quarter:function(e,t){return[3*t,"Month",!0]},month:function(e,t){return[t,"Month",!0]}},r={quarter:function(t,n,r){var o=n.getFullYear()-t.getFullYear(),i=t[r?"getUTCMonth":"getMonth"](),s=n[r?"getUTCMonth":"getMonth"](),u=e(i/3)+1,a=e(s/3)+1;return(a+=4*o)-u},weekday:function(e,t,n){var r,i=o("day",e,t,n),s=i%7;if(0===s)i=5*o("week",e,t,n);else{var u=0,a=e[n?"getUTCDay":"getDay"](),c=t[n?"getUTCDay":"getDay"]();r=parseInt(i/7,10);var l=new Date(+e);l.setDate(l[n?"getUTCDate":"getDate"]()+7*r);var f=l[n?"getUTCDay":"getDay"]();i>0?6===a||6===c?u=-1:0===a?u=0:(0===c||f+s>5)&&(u=-2):i<0&&(6===a?u=0:0===a||0===c?u=1:(6===c||f+s<0)&&(u=2)),i+=u,i-=2*r}return i},year:function(e,t){return t.getFullYear()-e.getFullYear()},month:function(e,t,n){var r=e[n?"getUTCMonth":"getMonth"]();return t[n?"getUTCMonth":"getMonth"]()-r+12*(t.getFullYear()-e.getFullYear())},week:function(e,n,r){return t(o("day",e,n,r)/7)},day:function(e,t){return 1.1574074074074074e-8*(t.getTime()-e.getTime())},hour:function(e,t){return 2.7777777777777776e-7*(t.getTime()-e.getTime())},minute:function(e,t){return 16666666666666667e-21*(t.getTime()-e.getTime())},second:function(e,t){return.001*(t.getTime()-e.getTime())},millisecond:function(e,t){return t.getTime()-e.getTime()}};function o(e,n,o,i){return e=e.replace(/s$/,""),t(r[e](n,o,i))}return{addTransform:function(e,t,r){return e=e.replace(/s$/,""),n.hasOwnProperty(e)?n[e](t,r):[r,"UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s",!1]},differenceTransform:o}}(),i=o.addTransform,s=o.differenceTransform,u=Math.floor,a=Math.round,c=Math.min,l=Math.pow,f=Math.ceil,h=Math.abs,p=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m=["Before Christ","Anno Domini"],E=["BC","AD"];function v(e,t){return y.difference(new Date(e.getFullYear(),0,1,e.getHours()),e,null,t)+1}function w(e){var t=e.toString(),n="",r=t.indexOf("(");return r>-1&&(n=t.substring(++r,t.indexOf(")"))),n}var y={getDaysInMonth:function(e){var t=e.getMonth();return 1===t&&y.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},isLeapYear:function(e,t){var n=e[t?"getUTCFullYear":"getFullYear"]();return n%400==0||n%4==0&&n%100!=0},isWeekend:function(e,t){var n=(e||new Date)[t?"getUTCDay":"getDay"]();return 0===n||6===n},getTimezoneName:w,compare:function(e,t,n){return e=new Date(+e),t=new Date(+(t||new Date)),"date"===n?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):"time"===n&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:e<t?-1:0},add:function(e,t,n){var r=i(t,e,n||0);n=r[0];var o=r[1],s=new Date(+e),u=r[2];return o&&s["set"+o](s["get"+o]()+n),u&&s.getDate()<e.getDate()&&s.setDate(0),s},difference:function(e,t,n,r){return t=t||new Date,s(n=n||"day",e,t,r)},format:function(e,n,o){var i,s,c,y,b,T,O,L;return(o=o||!1)?(i=e.getUTCFullYear(),s=e.getUTCMonth(),c=e.getUTCDay(),y=e.getUTCDate(),b=e.getUTCHours(),T=e.getUTCMinutes(),O=e.getUTCSeconds(),L=e.getUTCMilliseconds()):(i=e.getFullYear(),s=e.getMonth(),y=e.getDate(),c=e.getDay(),b=e.getHours(),T=e.getMinutes(),O=e.getSeconds(),L=e.getMilliseconds()),n.replace(/([A-Za-z])\1*/g,function(n){var A,R,C=n.charAt(0),M=n.length;if("d"===C)A=""+y,R=!0;else if("H"!==C||A)if("m"!==C||A)if("s"===C)A||(A=""+O),R=!0;else if("G"===C)A=(M<4?E:m)[i<0?0:1];else if("y"===C)A=i,M>1&&(2===M?A=function e(n,r,o){var i=n;if(t.isString(i)){if(n.length>r)if(o){var s=n.length;i=n.substring(s-r,s)}else i=n.substring(0,r)}else i=e(""+i,r);return i}(""+A,2,!0):R=!0);else if("Q"===C.toUpperCase())A=f((s+1)/3),R=!0;else if("M"===C)M<3?(A=s+1,R=!0):A=(3===M?d:p)[s];else if("w"===C)A=function(e,t,n){t=t||0;var r=e[n?"getUTCFullYear":"getFullYear"](),o=new Date(r,0,1).getDay(),i=(o-t+7)%7,s=u((v(e)+i-1)/7);return o===t&&s++,s}(e,0,o),R=!0;else if("D"===C)A=v(e,o),R=!0;else if("E"===C)M<3?(A=c+1,R=!0):A=(-3===M?g:_)[c];else if("a"===C)A=b<12?"AM":"PM";else if("h"===C)A=b%12||12,R=!0;else if("K"===C)A=b%12,R=!0;else if("k"===C)A=b||24,R=!0;else if("S"===C)A=a(L*l(10,M-3)),R=!0;else if("z"===C||"v"===C||"Z"===C){if(A=w(e),"z"!==C&&"v"!==C||A||(M=4),!A||"Z"===C){var D=e.getTimezoneOffset(),S=[D>=0?"-":"+",r(u(h(D)/60),2,"0"),r(h(D)%60,2,"0")];4===M&&(S.splice(0,0,"GMT"),S.splice(3,0,":")),A=S.join("")}}else A=n;else A=""+T,R=!0;else A=""+b,R=!0;return R&&(A=r(A,M,"0")),A})}},b={};function T(e){b[e+"sFromNow"]=function(t){return y.add(new Date,e,t)},b[e+"sAgo"]=function(t){return y.add(new Date,e,-t)}}for(var O=["year","month","day","hour","minute","second"],L=0,A=O.length;L<A;L++)T(O[L]);var R={parseDate:function(e,r){if(!r)throw new Error("format required when calling dateExtender.parse");var o=[],i=function(e,t){return e.replace(/([a-z])\1*/gi,function(e){var n,r=e.charAt(0),o=e.length;return"y"===r?n="\\d{2,4}":"M"===r?n=o>2?"\\S+?":"1[0-2]|0?[1-9]":"D"===r?n="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|0{0,2}[1-9][0-9]|0?[1-9]":"d"===r?n="3[01]|[12]\\d|0?[1-9]":"w"===r?n="[1-4][0-9]|5[0-3]|0?[1-9]":"E"===r?n="\\S+":"h"===r?n="1[0-2]|0?[1-9]":"K"===r?n="1[01]|0?\\d":"H"===r?n="1\\d|2[0-3]|0?\\d":"k"===r?n="1\\d|2[0-4]|0?[1-9]":"m"===r||"s"===r?n="[0-5]\\d":"S"===r?n="\\d{"+o+"}":"a"===r?(n="AM|PM","AM"!=="AM".toLowerCase()&&(n+="|"+"AM".toLowerCase()),"PM"!=="PM".toLowerCase()&&(n+="|"+"PM".toLowerCase()),n=n.replace(/\./g,"\\.")):n="v"===r||"z"===r||"Z"===r||"G"===r||"q"===r||"Q"===r?".*":" "===r?"\\s*":r+"*",t&&t.push(e),"("+n+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}(r,o),s=new RegExp("^"+i+"$","i").exec(e);if(!s)return null;var u=[1970,0,1,0,0,0,0],a="";if(function(e,n,r){if(!t.isArray(e)||"function"!=typeof n)throw new TypeError;for(var o=Object(e),i=o.length>>>0,s=0;s<i;s++)if(s in o&&!n.call(r,o[s],s,o))return!1;return!0}(s,function(e,t){if(t){var r=o[t-1],i=r.length,s=r.charAt(0);if("y"===s)if(e<100){e=parseInt(e,10);var l=""+(new Date).getFullYear(),f=100*l.substring(0,2),h=c(l.substring(2,4)+20,99);u[0]=e<h?f+e:f-100+e}else u[0]=e;else if("M"===s){if(i>2){var m,E,v=p;3===i&&(v=d),e=e.replace(".","").toLowerCase();var w=!1;for(m=0,E=v.length;m<E&&!w;m++)v[m].replace(".","").toLocaleLowerCase()===e&&(e=m,w=!0);if(!w)return!1}else e--;u[1]=e}else if("E"===s||"e"===s){var y=_;3===i&&(y=g),e=e.toLowerCase(),y=n.map(y,function(e){return e.toLowerCase()});var b=n.indexOf(y,e);if(-1===b){if(e=parseInt(e,10),isNaN(e)||e>y.length)return!1}else e=b}else"D"===s||"d"===s?("D"===s&&(u[1]=0),u[2]=e):"a"===s?(e=e.replace(/\./g,"").toLowerCase(),a="pm"===e?"p":"am"===e?"a":""):"k"===s||"h"===s||"H"===s||"K"===s?("k"===s&&24==+e&&(e=0),u[3]=e):"m"===s?u[4]=e:"s"===s?u[5]=e:"S"===s&&(u[6]=e)}return!0})){var l=+u[3];"p"===a&&l<12?u[3]=l+12:"a"===a&&12===l&&(u[3]=0);var f=new Date(u[0],u[1],u[2],u[3],u[4],u[5],u[6]),h=-1!==n.indexOf(o,"d"),m=-1!==n.indexOf(o,"M"),E=u[1],v=u[2],w=f.getMonth(),y=f.getDate();return m&&w>E||h&&y>v?null:f}return null}},C=e.define(t.isDate,y).define(t.isString,R).define(t.isNumber,b);for(L in y)y.hasOwnProperty(L)&&(C[L]=y[L]);for(L in R)R.hasOwnProperty(L)&&(C[L]=R[L]);for(L in b)b.hasOwnProperty(L)&&(C[L]=b[L]);return C}(n(4),n(7),n(13)))}).call(this)},function(e,t){e.exports=require("os")},function(e,t,n){var r=n(6),o=r.isUndefined,i=r.spreadArgs,s=n(11),u=(process.stdout,n(9)),a=/^\s*(?:''|"")?\s*(?:,\s*(?:''|"")?\s*)*$/,c=",",l=n(39),f=(n(5),n(40).StringDecoder),h=!!u.Transform.prototype.isPaused;function p(e){var t;if((e=e||{}).objectMode=!r.has(e,"objectMode")||e.objectMode,u.Transform.call(this,e),this.lines="",this.decoder=new f,this._parsedHeaders=!1,this._rowCount=-1,this._emitData=!1,r.has(e,"delimiter")){if((t=e.delimiter).length>1)throw new Error("delimiter option must be one character long");t=r.escape(t)}else t=c;return e.delimiter=t,this.parser=l(e),this._headers=e.headers,this._renameHeaders=e.renameHeaders,this._ignoreEmpty=e.ignoreEmpty,this._discardUnmappedColumns=e.discardUnmappedColumns,this._strictColumnHandling=e.strictColumnHandling,this.__objectMode=e.objectMode,this.__buffered=[],this}s.inherits(p,u.Transform);var d=p.prototype.on,_=p.prototype.emit;r(p).extend({__pausedDone:null,__endEmitted:!1,__emittedData:!1,__handleLine:function(e,t,n,o){var i=this._ignoreEmpty,s=this;return r.isBoolean(i)&&i&&(!e||a.test(e.join("")))?o(null,null):n?o(null,e):void this.__transform(e,function(e,n){e?o(e):s.__validate(n,function(e,r,i){e?o(e):r?o(null,n):(s.emit("data-invalid",n,t,i),o(null,null))})})},__processRows:function(e,t,n){var o,i=this;r.asyncEach(e,function(e,t){e&&i.__handleLine(e,o=++i._rowCount,!1,function(e,n){e?t(e):(n?i.isStreamPaused()?i.__buffered.push([n,o]):i.__emitRecord(n,o):o=--i._rowCount,t())})},function(e){e?n(e):n(null,t.line)})},__processHeaders:function(e,t){var n=this._headers,i=this._renameHeaders,s=this._discardUnmappedColumns,u=this._strictColumnHandling,a=this;function c(e,n){if(e)t(e);else if(r.isArray(n)){var i=n.length,c=a.__transform;a.__transform=function(e,t){var r,l={},f=-1;if(e.length>i){if(!s)return u?(a.emit("data-invalid",e),c(null,t)):(a.emit("error",new Error("Unexpected Error: column header mismatch expected: "+i+" columns got: "+e.length)),c(null,t));e.splice(i)}else if(u&&e.length<i)return a.emit("data-invalid",e),c(null,t);for(;++f<i;)o(n[f])||(r=e[f],l[n[f]]=o(r)?"":r);return c(l,t)}}a._parsedHeaders=!0,t(null)}i?Array.isArray(n)?(e.shift(),c(null,n)):a.emit("error",new Error("Error renaming headers: new headers must be provided in an array")):r.isBoolean(n)&&n?this.__handleLine(e.shift(),0,!0,c):c(null,n)},_parse:function(e,t,n){var r,o=this;try{e=this.parser(e,t),(r=e.rows).length?this._parsedHeaders?this.__processRows(r,e,n):this.__processHeaders(r,function(t){t?n(t):o.__processRows(r,e,n)}):n(null,e.line)}catch(e){n(e)}},__emitRecord:function(e,t){this._emitData&&this.push(this.__objectMode?e:JSON.stringify(e))},__removeBOM:function(e){return e&&"string"==typeof e&&"0xFEFF"==e.charCodeAt(0)?e.slice(1):e},_transform:function(e,t,n){var r=this.lines+this.decoder.write(e),o=this;r.length>1?(r=this.__removeBOM(r),this._parse(r,!0,function(e,t){e?n(e):(o.lines=t,o.isStreamPaused()?o.__pausedDone=n:n())})):(this.lines=r,this.isStreamPaused()?this.__pausedDone=n:n())},__doFlush:function(e){try{e()}catch(t){e(t)}},_flush:function(e){var t=this;this.lines?this._parse(this.lines,!1,function(n){n?e(n):t.isStreamPaused()?t.__pausedDone=function(){t.__doFlush(e)}:t.__doFlush(e)}):this.isStreamPaused()?this.__pausedDone=function(){t.__doFlush(e)}:this.__doFlush(e)},__validate:function(e,t){return t(null,!0)},__transform:function(e,t){return t(null,e)},__flushPausedBuffer:function(){var e=this.__buffered;if(e.length){for(var t;e.length;)if(t=e.shift(),this.__emitRecord(t[0],t[1]),this.isStreamPaused())return;e.length=0}if(this.__pausedDone){var n=this.__pausedDone;this.__pausedDone=null,n()}},isStreamPaused:function(){return this.__paused},emit:function(e){"end"===e?this.__endEmitted||(this.__endEmitted=!0,i(_,["end",++this._rowCount],this)):(h||("pause"===e?this.__paused=!0:"resume"===e&&(this.__paused=!1,this.__flushPausedBuffer())),i(_,arguments,this))},on:function(e){return"data"!==e&&"readable"!==e||(this._emitData=!0),i(d,arguments,this),this},validate:function(e){return r.isFunction(e)||this.emit("error",new TypeError("fast-csv.Parser#validate requires a function")),2===e.length?this.__validate=e:this.__validate=function(t,n){return n(null,e(t))},this},transform:function(e){return r.isFunction(e)||this.emit("error",new TypeError("fast-csv.Parser#transform requires a function")),2===e.length?this.__transform=e:this.__transform=function(t,n){return n(null,e(t))},this}}),e.exports=p},function(e,t,n){var r=n(6),o=r.has,i=r.isUndefinedOrNull,s=r.trim,u=r.trimLeft,a=r.trimRight;e.exports=function(e){var t,n,r=(e=e||{}).delimiter||",",c=e.ltrim||!1,l=e.rtrim||!1,f=e.trim||!1,h=o(e,"quote")?e.quote:'"',p=new RegExp("([^"+r+"'\"\\s\\\\]*(?:\\s+[^"+r+"'\"\\s\\\\]+)*)"),d=new RegExp("(?:\\n|\\r|"+r+")"),_=e.escape||'"',g=new RegExp("([^\\s]|\\r\\n|\\n|\\r|"+r+")"),m=/(\r\n|\n|\r)/,E=new RegExp("(?!"+r+") ");function v(e){return f?e=s(e):c?e=u(e):l&&(e=a(e)),e}function w(e,t,n,o){var i,s=0,u=[],a=!1,c=0,l=e.length,f=_===h;if(l)for(;n<l&&(i=e.charAt(n));){if(i===h)if(a)if(f&&e.charAt(n+1)===h)n++,u[c++]=i;else if(f||u[c-1]!==_){if(!--s){++n;break}}else u[c-1]=i;else s++,a=!0;else u[c++]=i;++n}u=u.join("");var p=T(e,n),g=p.token;if(g&&0===g.search(r))o&&p.cursor+1>=l?n=null:n++;else if(s&&!g){if(!o)throw new Error("Parse Error: expected: '"+h+"' got: '"+g+"'. at '"+e.substr(n).replace(/[r\n]/g,"\\n'"));n=null}else{if(!s&&g&&-1===g.search(d))throw new Error("Parse Error: expected: '"+h+"' got: '"+g+"'. at '"+e.substr(n,10).replace(/[\r\n]/g,"\\n'"));!o||g&&m.test(g)||(n=null)}return null!==n&&t.push(v(u)),n}function y(e,t,n){var r=e.substr(t).search(m);return r=-1===r?n?null:e.length+1:t+r+1}function b(t,n,o,i){var s=t.substr(o),u=s.search(d);if(-1===u){if(!p.test(s))throw new Error("Parse Error: delimiter '"+r+"' not found at '"+s.replace(/\n/g,"\\n'"));u=s.length}var a=s.charAt(u);if(-1!==a.search(r))if(i&&o+(u+1)>=t.length)o=null;else{n.push(v(s.substr(0,u))),o+=u+1;var c=t.charAt(o);!e.strictColumnHandling&&(m.test(c)||o>=t.length)&&n.push(""),e.strictColumnHandling||!E.test(c)||i||n.push(c)}else m.test(a)?(n.push(v(s.substr(0,u))),o+=u):i?o=null:(n.push(v(s.substr(0,u))),o+=u+1);return o}function T(e,t){var n,r,o,i=e.substr(t);return-1!==(o=i.search(g))&&(r=i.match(g)[1].length,n=e.substr(t+o,r),t+=o+r-1),{token:n,cursor:t}}return o(e,"comment")&&(t=e.comment,n=!0),function(e,r){for(var o,s,u,a=0,c=e.length,l=[],f=[],p=0;a<c;){if(o=(s=T(e,a)).token,i(o)){a=p,u=null;break}if(m.test(o)){if(!((a=s.cursor+1)<c)){"\r"===o&&r&&(a=p,u=null);break}l.push(f),f=[],p=a}else if(n&&o===t){if(null===(u=y(e,a,r))){a=p;break}if(!(u<c)){a=u,u=null;break}p=a=u}else{if(null===(u=o===h?w(e,f,s.cursor,r):b(e,f,a,r))){a=p;break}a=u}}return null!==u&&l.push(f),{line:e.substr(a),rows:l}}}},function(e,t){e.exports=require("string_decoder")},function(e,t,n){var r=n(5),o=n(6),i=(o.escape,n(9)),s=(o.LINE_BREAK,n(42));function u(e){return new s(e)}function a(e,t,n){var r=u(t);e.length;return o.asyncEach(e,function(e,t){r.write(e,null,t)},function(e){e?r.emit("error",e):r.end()}),r}u.writeToBuffer=function(e,t,n){o.isFunction(t)&&(n=t,t={});var r=new i.Writable,s=[];r._write=function(e,t,n){s.push(e),n()},r.on("error",n).on("finish",function(){n(null,Buffer.concat(s))}),a(e,t).pipe(r)},u.write=a,u.createWriteStream=u,u.writeToString=function(e,t,n){o.isFunction(t)&&(n=t,t={});var r=new i.Writable,s=[];r._write=function(e,t,n){s.push(e+""),n()},r.on("error",n).on("finish",function(){n(null,s.join(""))}),a(e,t).pipe(r)},u.writeToPath=function(e,t,n){var o=r.createWriteStream(e,{encoding:"utf8"});return a(t,n).pipe(o)},u.writeToStream=function(e,t,n){return a(t,n).pipe(e)},e.exports=u},function(e,t,n){n(5);var r=n(11),o=n(6),i=(o.escape,o.isArray),s=o.has,u=n(9).Transform,a=(o.LINE_BREAK,n(43)),c=a.createFormatter,l=a.checkHeaders,f=a.transformItem,h=a.defaultTransform;function p(e){(e=e||{}).objectMode=!0,s(e,"transform")&&(e.consumerTransform=e.transform,delete e.transform),u.call(this,e),this.formatter=c(e,this),this.rowDelimiter=e.rowDelimiter||"\n";var t=s(e,"headers")?!!e.headers:null,n=t&&i(e.headers)?e.headers:null;this.hasHeaders=t,this.headers=n,t&&(n?(this.parsedHeaders=!0,this.headersLength=n.length):this.parsedHeaders=!1),this.hasWrittenHeaders=!t,this.includeEndRowDelimiter=!!e.includeEndRowDelimiter,s(e,"consumerTransform")&&this.transform(e.consumerTransform)}r.inherits(p,u),o(p).extend({headers:null,headersLength:0,totalCount:0,_transform:function(e,t,n){var r=this;this.__transform(e,function(e,t){e?n(e):(l(r,t)&&r.push(new Buffer(f(r,t),"utf8")),n())})},__transform:h,transform:function(e){return o.isFunction(e)||this.emit("error",new TypeError("fast-csv.FormatterStream#transform requires a function")),2===e.length?this.__transform=e:this.__transform=function(t,n){n(null,e(t))},this},_flush:function(e){this.includeEndRowDelimiter&&this.push(this.rowDelimiter),e()}}),e.exports=p},function(e,t,n){n(5);var r=n(6),o=r.has,i=r.isBoolean,s=r.isUndefinedOrNull,u=r.escape,a=r.isArray,c=r.keys,l=(n(9),r.LINE_BREAK);function f(e){return a(e)&&a(e[0])&&2===e[0].length}t.createFormatter=function(e,t){var n=(e=e||{}).delimiter||",",r=new RegExp("["+n+u(e.rowDelimiter||l)+"']"),c=e.quote||'"',f=e.escape||'"',h=new RegExp(c,"g"),p=!!o(e,"quoteColumns")&&e.quoteColumns,d=function(e,t,n){return i(t)?i(n)?function(e,r){return r?n:t}:a(n)?function(e,r){return r?n[e]:t}:function(r,o){return o?n[e.headers[r]]:t}:a(t)?i(n)?function(e,r){return r?n:t[e]}:function(e,r){return r?n[e]:t[e]}:i(n)?function(r,o){return o?n:t[e.headers[r]]}:function(r,o){return o?n[e.headers[r]]:t[e.headers[r]]}}(t,p,o(e,"quoteHeaders")?e.quoteHeaders:p);function _(e,t,n){var o;return(o=-1!==(e=e.replace(/\0/g,"")).indexOf(c))?(e=e.replace(h,f+c),o=!0):o=-1!==e.search(r),(e=(o=o||d(t,n))?[c+e+c]:[e]).join("")}return function(e,t){for(var r,o=-1,i=e.length,u=[];++o<i;)r=e[o],r=(s(r)?"":r)+"",u.push(_(r,o,t));return u.join(n)}},t.transformItem=function(e,t){return a(t)?f(t)?function(e,t){var n=[],r=[],o=-1,i=e.headersLength;for(e.totalCount++&&r.push(e.rowDelimiter);++o<i;)n[o]=t[o][1];return r.push(e.formatter(n)),r.join("")}(e,t):function(e,t,n){var r=[];return e.totalCount++&&r.push(e.rowDelimiter),r.push(e.formatter(t)),r.join("")}(e,t):function(e,t){var n=[],r=[],o=e.headers,i=-1,s=e.headersLength;for(e.totalCount++&&r.push(e.rowDelimiter);++i<s;)n[i]=t[o[i]];return r.push(e.formatter(n)),r.join("")}(e,t)},t.checkHeaders=function(e,t){var n,r=!0;return e.parsedHeaders||(e.parsedHeaders=!0,n=e.headers=function(e){var t,n,r;if(f(e))for(n=-1,r=e.length,t=[];++n<r;)t[n]=e[n][0];else t=a(e)?e:c(e);return t}(t),e.headersLength=n.length),e.hasWrittenHeaders||(e.totalCount++,e.push(new Buffer(e.formatter(e.headers,!0),"utf8")),e.hasWrittenHeaders=!0,r=f(t)||!a(t)),r},t.defaultTransform=function(e,t){return t(null,e)}},function(e,t,n){"use strict";var r=n(45),o=n(46);t.createReadStream=function(e){return new o(this,e=e||{})},t.createWriteStream=function(e){return new r(this,e=e||{})};var i=n(47),s=["drain","pipe","unpipe","error"];t.write=function(e,t,n){return this.__stream||(this.__stream=new r(this),i(this,this.__stream,s),this.on("destroy",function(){this.__stream.end()})),this.__stream.write(e,t,n)},t.end=function(){this.emit("done")}},function(e,t,n){"use strict";var r=n(18),o=n(19).Writable;function i(e,t){if(!(this instanceof i))return new i(e);o.call(this,{objectMode:!0}),this.db=e,this.opts=t||{}}e.exports=i,r(i,o),i.prototype._write=function(e,t,n){if(Buffer.isBuffer(e)&&(e=e.toString()),"string"==typeof e)try{e=JSON.parse(e)}catch(e){return n(e)}Array.isArray(e)?this.db.bulkDocs({docs:e},this.opts).then(function(){n()},n):"_id"in e?this.db.put(e,this.opts).then(function(){n()},n):this.db.post(e,this.opts).then(function(){n()},n)}},function(e,t,n){"use strict";var r=n(18),o=n(19).Readable;function i(e,t){if(!(this instanceof i))return new i(e,t);o.call(this,{objectMode:!0}),t=t||{};var n=this.opts={since:0};Object.keys(t).forEach(function(e){n[e]=t[e]}),this.opts.returnDocs=!1,this.last=t.since,this.db=e,this.changes=void 0,this.canceled=!1}e.exports=i,r(i,o),i.prototype._read=function(){if(!this.changes){var e=this;this.opts.since=this.last,this.changes=this.db.changes(this.opts).on("complete",function(t){e.cancel=function(){},t.canceled||e.push(null)}),this.changes.on("change",function(t){e.last=t.seq,e.push(t)||e.changes.cancel()})}},i.prototype.cancel=function(){if(this.canceled=!0,this.changes&&"function"==typeof this.changes.cancel)return this.changes.cancel()}},function(e,t,n){"use strict";e.exports=function(e,t,n){e.on("newListener",function(e,r){~n.indexOf(e)&&t.on(e,r)}),e.on("removeListener",function(e,r){~n.indexOf(e)&&t.removeListener(e,r)})}},function(e,t){e.exports=require("glob")},function(e,t){e.exports=require("pouchdb-load")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("csv2")},function(e,t){e.exports=require("node-couchdb")},function(e){e.exports={name:"pecha.js",version:"0.8.19",productName:"Pecha.js",description:"Simple practical Tibetan text analyzer",author:"Michael Bykov <m.bykov@gmail.com>",copyright:"© 2018-2019, Michael Bykov",license:"GPL-3.0",homepage:"http://diglossa.org/tibetan",main:"app/background.js",build:{appId:"org.diglossa.tibetan",files:["app/**/*","src/**/*","resources/**/*","node_modules/**/*","package.json"],directories:{buildResources:"resources"},dmg:{title:"${productName}-Setup",window:{height:380,width:540}},mac:{category:"public.app-category.productivity",icon:"resources/icon.icns"},win:{icon:"resources/icon.ico",publisherName:"Michael Bykov",publish:["github"]},linux:{category:"Educational software",target:[{target:"deb",arch:["x64"]},{target:"rpm",arch:["x64"]}],icon:"resources/icons"},publish:"github"},scripts:{postinstall:"electron-builder install-app-deps",preunit:"webpack --config=build/webpack.unit.config.js --env=test --display=none",unit:"electron-mocha temp/specs.js --renderer --require source-map-support/register",pree2e:"webpack --config=build/webpack.app.config.js --env=test --display=none && webpack --config=build/webpack.e2e.config.js --env=test --display=none",e2e:"mocha temp/e2e.js --require source-map-support/register",test:"npm run unit && npm run e2e",start:"node build/start.js",release:"webpack --config=build/webpack.app.config.js --env=production && electron-builder",release_:"npm test && webpack --config=build/webpack.app.config.js --env=production && electron-builder"},dependencies:{axios:"^0.18.0",cholok:"^0.2.0",csv2:"^0.1.1",debug:"^4.1.1","electron-clipboard-extended":"^1.1.1","electron-is-dev":"^1.0.1","electron-settings":"^3.2.0","file-loader":"^2.0.0","fs-extra":"^7.0.1","fs-jetpack":"^2.2.2","git-clone":"^0.1.0",glob:"^7.1.3",json5:"^2.1.0",lodash:"^4.17.11",mousetrap:"^1.6.2","node-couchdb":"^1.3.0",pouchdb:"^7.0.0","pouchdb-load":"^1.4.6","pouchdb-quick-search":"^1.3.0","pouchdb-utils":"^7.0.0",slash:"^2.0.0","speckled-band":"^2.0.0","split.js":"^1.4.0"},devDependencies:{"@babel/core":"^7.1.2","@babel/preset-env":"^7.1.0","babel-loader":"^8.0.4","babel-plugin-transform-object-rest-spread":"^7.0.0-beta.3",chai:"^4.2.0","css-loader":"^0.28.7",electron:"4.0.0","electron-builder":"^20.31.3","electron-mocha":"^6.0.4","friendly-errors-webpack-plugin":"^1.7.0",mocha:"^5.2.0","source-map-support":"^0.5.9",spectron:"^4.0.0","style-loader":"^0.23.0",webpack:"^4.20.2","webpack-cli":"^3.1.2","webpack-merge":"^4.1.4","webpack-node-externals":"^1.7.2"},repository:{type:"git",url:"git+https://github.com/mbykov/pecha.js.git"},bugs:{url:"https://github.com/mbykov/pecha.js/issues"}}},,,function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(3),s=n.n(i),u=n(22),a=n.n(u),c=n(0);const l={label:"File",submenu:[{label:"Home",accelerator:"CmdOrCtrl+L",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","home")}},{label:"Quit",accelerator:"CmdOrCtrl+Q",click:()=>{c.app.quit()}}]},f={label:"About",submenu:[{label:"About Pecha.js",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","about")}},{label:"Code and Download",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","code")}},{label:"License",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","license")}},{label:"Contacts",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","contacts")}},{label:"Acknowledgements",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","acknowledgements")}}]},h={label:"Dict",submenu:[{label:"Clone dicts from server",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","clonedicts")}},{label:"Arrange local dicts",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","activedicts")}},{label:"Create CSV from some texts",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","localdict")}},{label:"Import form CSV",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","csv")}},{label:"Publish new dictionary (disabled)",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","publish")}},{label:"Cleanup DBs completely",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","cleanup")}}]},p={label:"Help",submenu:[{label:"hot keys",click:()=>{c.BrowserWindow.getFocusedWindow().webContents.send("section","help")}},{label:"Toggle DevTools",accelerator:"Alt+CmdOrCtrl+I",click:()=>{c.BrowserWindow.getFocusedWindow().toggleDevTools()}}]};var d=n(8),_=n.n(d),g=n(2);console.log;const m=g.b.tsek;var E=n(23);const v=g.b.tsek;let w=new RegExp(v+"$");const y=n(3),b=n(16);let T=n(48);n(14);const O=n(12),L=n(17);L.plugin(n(49));const A=console.log;n(50),n(51);let R=[],C="tib",M="ཀ",D="￰";const S=n(52),I=(new S,new S({host:"diglossa.org",protocol:"http",port:5984,auth:{user:"guest",pass:"guest"}}));function x(e){}function N(){A("onSyncError")}function U(e){let t=O.get("cfg");if(t)!function(e){let t=O.get("upath");e.forEach((e,n)=>{if(!e.active)return;let r=y.resolve(t,"pouch",e.dname),o=new L(r);o.dname=e.dname,o.weight=n,R.push(o)}),R.map(e=>e.dname)}(t);else{t=[],O.set("cfg",t);let n=y.resolve(e,"pouch");b.ensureDirSync(n)}}function P(e,t){let n=O.get("cfg");if(o.a.find(n,e=>e.dname==t))return n;let r={dname:t,active:!0,idx:n.length};return n.push(r),O.set("cfg",n),n}function j(e){let t,n=function(e){let t=e.split(m),n=4,r=e,i=(t.length,[[t]]);!function e(t,s){(function(e){let t,n,r=[];for(let o=1;o<e.length+1;o++){t=e.slice(0,o),n=e.slice(o);let i={head:t,tail:n};n.length&&r.push(i)}return r.reverse()})(t).forEach(t=>{s.push(t.head),s.push(t.tail),o.a.flatten(s).join(m)==r&&(i.push(o.a.clone(s)),s.pop()),s.length<n&&e(t.tail,s),s.pop()})}(t,[]);let s=[];return i.forEach(e=>{let t=[];e.forEach(e=>{t.push(e.join(m))}),s.push(t)}),s}(e.str),r=function(e){let t=o.a.uniq(o.a.flatten(e)),n=[];return t.forEach(e=>{g.a.forEach(t=>{let r=new RegExp(t+"$"),o=e.replace(r,"");e!=o&&n.push(o)})}),{main:t,added:n}}(n);t=e.compound?o.a.filter(r.main,t=>t!=e.str):o.a.uniq(r.main.concat(r.added));R.map(e=>e.dname);return Promise.all(R.map(function(e){return e.allDocs({keys:t,include_docs:!0}).then(function(t){if(!t||!t.rows)throw new Error("no dbn result");let n=o.a.compact(t.rows.map(e=>e.doc)),r=o.a.flatten(o.a.compact(n.map(e=>e.docs)));return r.forEach(t=>{t.dname=e.dname,t.weight=e.weight}),r}).catch(function(e){console.log("ERR GET DBs",e)})})).then(function(t){let r=function(e,t){let n,r=function(e,t){let n,r,i=[],s=[];e.forEach(e=>{let n=[],r=!1,u=!0;e.forEach(e=>{let i=o.a.filter(t,t=>(function(e,t){if(e==t)return!0;let n=new RegExp("^"+t),r=e.replace(n,"");return!(e==r||!g.a.includes(r))})(e,t.dict));i.length&&(r=!0),i.length||(u=!1);let s={seg:e,docs:i};n.push(s)}),r&&i.push(n),u&&s.push(n)}),s.length?(n=B(s),r=!0):n=B(i);return{chains:n,full:r}}(t,e).chains;r.length>1?n=function(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i++){let s=e.map(e=>e[i].seg);if(1==o.a.uniq(s).length)r.push(n[i]),t=null;else{t||(t={ambi:!0,seg:"",docs:[]},r.push(t));let n=e.map(e=>({seg:e[i].seg,docs:e[i].docs}));t.docs.push(n)}}return o.a.filter(r,e=>e.ambi).forEach(e=>{let t=e.docs[0],n=[];for(let r=0;r<t.length;r++){let t=e.docs.map(e=>e[r]);n.push(t)}e.chains=n;let r=n[0];e.seg=r.map(e=>e.seg).join(v)}),r}(r):1==r.length&&(n=r[0]);return n}(o.a.flatten(t),n);return e.chain=r,e})}function B(e){let t=o.a.max(e.map(e=>o.a.sum(e.map(e=>e.docs.length?e.seg.length:0))/e.length)),n=o.a.filter(e,e=>o.a.sum(e.map(e=>e.docs.length?e.seg.length:0))/e.length>=t-1),r=o.a.min(n.map(e=>e.length));return o.a.filter(n,e=>e.length==r)}let k,F=[];function W(e){let t=y.resolve(__dirname,e);T("**/*",{cwd:t,nodir:!0},function(e,n){let r=function(e,t){let n=[],r={};return t.forEach(t=>{let i=y.resolve(e,t);if("localDict.csv"==t||"unprocessed.csv"==t)return;let s=b.readFileSync(i,"utf8").trim().split("\n");(s=o.a.compact(s)).forEach((e,t)=>{let o=function(e){let t=e.trim();return t=t.trim().replace(/\.$/,"")}(e),i=_()(o,C);i&&i.forEach(e=>{e.forEach(e=>{e.lang==C&&e.text.split(" ").forEach(e=>{e=e.replace(w,""),r[e]||(n.push(e),r[e]=!0)})})})})}),n}(t,n).map(e=>({str:e}));return k=y.resolve(t,"localDict.csv"),b.removeSync(k),r.forEach(e=>{(function(e){return j(e).then(function(t){if(!t.chain)return F;t.chain.forEach(t=>{if(t.docs.length)!function(e){let t=[e,", -\n"].join("");b.appendFile(k,t,function(e){e&&console.log("CSVERR",e)})}(t.seg);else if(e.str!=t.seg)return H({str:t.seg})})})})(e).catch(function(e){console.log("Q-ERR",e)})})})}function H(e){function t(t){if(!t.chain)return F;t.chain.forEach(t=>{if(t.docs.length)G(t.seg);else{if(e.str!=t.seg)return H({str:t.seg})}})}return j(e).then(t)}function G(e){let t=[e,", -\n"].join("");b.appendFile(k,t,function(e){if(e)console.log("CSVERR",e)})}var q=n(10);const Z=n(12);console.log;if("production"!==q.name){const e=c.app.getPath("userData");c.app.setPath("userData",`${e} (${q.name})`)}c.app.on("ready",()=>{(()=>{const e=[l,h,f,p];q.name,c.Menu.setApplicationMenu(c.Menu.buildFromTemplate(e))})();const e=new c.BrowserWindow({webPreferences:{nodeIntegration:!0}});let t=Z.get("winBounds")||e.getBounds();t.y-=21,e.setBounds(t),e.loadURL(a.a.format({pathname:s.a.join(__dirname,"app.html"),protocol:"file:",slashes:!0})),"development"===q.name&&e.openDevTools(),e.webContents.on("did-finish-load",()=>{let t=n(53),r=t.name,o=t.version;e.webContents.send("version",o),e.setTitle([r,"v.",o].join(" "))}),e.on("resize",function(){e.webContents.send("reload")}),e.on("close",()=>{Z.set("winBounds",e.getBounds())}),c.globalShortcut.register("CommandOrControl+R",()=>e.reload());const r=c.app.getAppPath(),i=c.app.getPath("userData");Z.set("apath",r),Z.set("upath",i),U(i),c.ipcMain.on("infoDB",(e,t)=>{!function(e,t){let n=y.resolve(e,"pouch",t);new L(n).allDocs({include_docs:!0,startkey:M,endkey:D}).then(function(e){e.rows.length&&e.rows[0].doc}).catch(function(e){console.log("INFO ERR",e)})}(i,t)}),c.ipcMain.on("queryDBs",(e,t)=>{j(t).then(function(t){e.sender.send("replyDBs",t)})}),c.ipcMain.on("importCSV",(e,t)=>{!function(e,t){e=y.resolve(e),b.readJson(e).then(n=>{let r=y.parse(e).dir,o=(y.parse(e).name,[y.parse(e).name,"csv"].join("."));y.resolve(r,o),A("__BEFORE CSV");let i=O.get("upath"),s=y.resolve(i,"pouch",o);t(Object(E.csv2pouch)(e,s))})}(t,function(t){t.on("finish",function(t){e.sender.send("csvImportReply",!0)}).on("error",function(t){e.sender.send("csvImportReply",!1)})})}),c.ipcMain.on("export-to-csv",(e,t)=>{(function(e){let t=o.a.find(R,t=>t.dname==e);return t.allDocs({include_docs:!0,startkey:M,endkey:D}).then(function(n){let r=n.rows.map(e=>e.doc),i="";r.forEach(e=>{let t=e._id,n=e.docs.map(e=>e.trns),r=o.a.flatten(n).join(";"),s=[t,r.split(",").length>1?JSON.stringify(r):r].join(",");s=[s,"\n"].join(""),i+=s});let s=O.get("upath"),u=[e,"csv"].join("."),a=[e,"json"].join("."),c=y.resolve(s,u),l=y.resolve(s,a);b.writeFile(c,i,function(e){if(e)return!1;t.get("description").then(function(e){b.writeJson(l,e).then(()=>!0).catch(e=>(console.error(e),!1))})})})})(t).then(function(t){e.sender.send("csvExportReply",!0)}).catch(function(t){console.log("ERR",t),e.sender.send("csvExportReply",!1)})}),c.ipcMain.on("scanLocalDict",(e,t)=>{W(t),e.sender.send("scanLocalReply",t)}),c.ipcMain.on("remoteDicts",(e,t)=>{I.listDatabases().then(function(e){return Promise.all(e.map(function(e){let t=["http://diglossa.org:5984/",e].join("");return new L(t).info()})).then(function(e){return e.map(e=>({dname:e.db_name,size:e.doc_count}))})}).then(function(t){t=o.a.filter(t,e=>"_"!=e[0]),e.sender.send("remoteDictsReply",t)}).catch(function(t){e.sender.send("remoteDictsReply",!1)})}),c.ipcMain.on("replicate",(e,t)=>{s.a.resolve(i,"pouch",t);(function(e,t){let n=y.resolve(e,"pouch",t),r=new L(n),o=["http://diglossa.org/dump-",t].join(""),i=["http://diglossa.org:5984/",t].join("");return r.load(o).then(function(){r.sync(i,{live:!0,retry:!0}).on("change",x).on("error",N),r.dname=t,R.push(r),R.map(e=>e.dname),P(0,t)})})(i,t).then(function(t){e.sender.send("replicateReply",!0)}).catch(function(t){e.sender.send("replicateReply",!1)})}),c.ipcMain.on("cleanupDB",(e,t)=>{!function(e,t){let n=y.resolve(e,"pouch");try{R=[],b.removeSync(n),b.ensureDirSync(n),O.set("cfg",[]),t(!0)}catch(e){console.log("ERR re-creating DBs",e),t(!1)}}(i,function(t){e.sender.send("cleanupReply",t)})})}),c.app.on("window-all-closed",()=>{c.app.quit()})}]);
//# sourceMappingURL=background.js.map