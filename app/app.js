!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("path")},,function(e,t){e.exports=require("electron-clipboard-extended")},function(e,t){e.exports=require("fs-extra")},function(e,t){e.exports=require("slash")},,function(e,t){e.exports=require("split.js")},,,,function(e,t){e.exports=require("util")},function(e,t){e.exports=require("mousetrap")},function(e,t){e.exports=require("json5")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("electron-is-dev")},,function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(0);n(12);function s(e){return document.querySelector(e)}function l(e){return document.querySelectorAll(e)}function c(e,t){let n=document.createElement("span");return n.textContent=e,t&&n.classList.add(t),n}function u(e,t){let n=document.createElement("p");return n.textContent=e,t&&n.classList.add(t),n}function a(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.lastChild)}var d=n(8),p=n.n(d);const f=console.log;function h(e){f("ONLYWF",e)}const m=console.log,g=n(4),x=n(0).remote.require("electron-settings"),b=n(13),{getCurrentWindow:y}=(n(5),n(2),n(6),n(0).remote);let q,v=[],E=0;function S(e){!function(){const e=document.querySelectorAll(".section.is-shown");Array.prototype.forEach.call(e,e=>{e.classList.remove("is-shown")})}(),s(["#",e].join("")).classList.add("is-shown")}function w(e){try{e=JSON.parse(JSON.stringify(e))}catch(t){m("NAV-state ERR",t),e={}}let t=e.section||"home";t||(e.section="home"),S(e.section),e.old||(e.old=!1,delete e.old,v.push(e),E=v.length-1);let n=s("#progress");"main"==t?(function(e){let t=x.get("split-sizes")||[50,50];q&&e.mono?q.collapse(1):q&&q.setSizes(t),q||(x.set("split-sizes",t),q=p()(["#source","#result"],{sizes:t,gutterSize:5,cursor:"col-resize",minSize:[0,0],onDragEnd:function(e){x.set("split-sizes",e),y().reload()}}),e.mono&&q.collapse(1),document.addEventListener("keydown",function(e){},!1),document.addEventListener("wheel",function(e){},!1))}(e),function(e){if(!e||!e.pars||!e.pars.length)return;let t=e.pars;f("PARS",t);let n=s("#source"),o=s("#result");a(n),a(o),t.forEach(e=>{let t=u();t.classList.add("tibpar"),e.forEach(e=>{f("SPN",e);let n=c(e.text);e.tib&&n.classList.add("tibetan"),e.punct&&n.classList.add("punct")," "==e.text&&n.classList.add("space"),t.appendChild(n)}),n.appendChild(t)});let r=l("span.tibetan");1==r.length&&h(r[0].textContent)}(e)):n.classList.remove("is-shown"),e={section:"home"},x.set("state",e)}b.bind(["alt+left","alt+right"],function(e){37==e.which?function(){if(E<=0)return;E--;let e=v[E];e.old=!0,w(e)}():39==e.which&&function(){if(E>=v.length-1)return;E++;let e=v[E];e.old=!0,w(e)}()}),b.bind(["alt+1","alt+2"],function(e){}),b.bind(["ctrl+f"],function(e){w({section:"search",query:g.readText().split(" ")[0]})}),b.bind(["esc"],function(e){});console.log;let L={zho:"([一-鿿]+)",tib:"([ༀ-࿿]+)",grc:"([Ͱ-Ͽἀ-῿̀-ͯ']+)"};const C=n(0).remote.require("electron-settings");n(14),n(15);n(5);n(6);const j=console.log,O=(n(2),n(4)),{dialog:z,getCurrentWindow:N}=n(0).remote;n(16),i.remote.app;s("#new-version");let P=s("#container");l('link[rel="import"]').forEach(e=>{let t=e.import.querySelector(".section");P.appendChild(t.cloneNode(!0))}),i.ipcRenderer.on("section",function(e,t){w({section:t})});let A=C.get("state");j("STATE1",A),w(A),document.body.addEventListener("click",e=>{let t=e.target.dataset;if(t)if(t.external){let t=e.target.textContent;i.shell.openExternal(t)}else t.section&&w({section:t.section})}),O.on("text-changed",()=>{let e=((e,t)=>{let n=new RegExp(L[e]);if(!n.test(t))return;let o=t.trim().replace(/᾽/g,"'"),i=o.split("'").join("");if(!n.test(i))return;let s=new RegExp("([.,!:;·།])"),l=o.replace(/\r?\n+/,"\n").split("\n"),c=(l.map(e=>e.split(s)),[]);return l.forEach(t=>{let o=[];t.split(s).forEach(t=>{if(s.test(t)){let e={text:t,punct:!0};o.push(e)}else{let i=t.split(n);(i=r.a.compact(i)).forEach(t=>{let r={text:t};!!n.test(t)&&(r[e]=!0),o.push(r)})}}),c.push(o)}),c})("tib",O.readText());e&&e.length&&w({section:"main",pars:e})}).startWatching()}]);
//# sourceMappingURL=app.js.map