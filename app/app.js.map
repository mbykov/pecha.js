{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"electron\"","webpack:///external \"lodash\"","webpack:///./src/lib/tibetan_data.js","webpack:///external \"path\"","webpack:///external \"speckled-band\"","webpack:///external \"electron-settings\"","webpack:///external \"electron-is-dev\"","webpack:///external \"pouchdb\"","webpack:///external \"debug\"","webpack:///../src/index.js","webpack:///external \"electron-clipboard-extended\"","webpack:///external \"slash\"","webpack:///external \"split.js\"","webpack:///external \"util\"","webpack:///../../src/lib/data.js","webpack:///external \"pouchdb-authentication\"","webpack:///external \"mousetrap\"","webpack:///external \"json5\"","webpack:///external \"axios\"","webpack:///./src/lib/utils.js","webpack:///./src/lib/parsedata.js","webpack:///./src/lib/dict.js","webpack:///./src/lib/auth.js","webpack:///./src/lib/nav.js","webpack:///./src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","__webpack_exports__","tibsyms","tibsuff","tsek","str","cumul","result","syms","segs","seg","sym","letter","lower","vowel","length","tib","space","shad","segments","idx","trl","data","debug","tmp","res","stack","main","prefix","pref","getLetter","voiced","row","nasalHigh","apref","join","maa","a","superfix","asuperfix","_","amain","maintak","_amain","wasur","subfix","asub","asubtak","up2rows","sama","includes","pretty","vow","mainvow","suffix","avow","asuf","kanapamara","tanalasa","umlaut","tasa","secsuf","asecsuf","quest","translit","point","prefs","sufs","ult","penult","vows","indexVow","errs","isWasur","lowers","subfixes","yaralaa","indexSubfix","indWasur","firstLow","indexFirstLow","lowLast","indexLowLast","Error","ralasa","syllable","_lodash","_data","console","log","kanatanapamaaralasa","sa","la","u","1","2","3","4","5","col","descr","q","sel","document","querySelector","qs","querySelectorAll","tag","style","el","createElement","classList","add","span","textContent","empty","hasChildNodes","removeChild","lastChild","getCoords","getBoundingClientRect","placePopup","coords","top","left","getInnermostHovered","slice","pop","settings","remote","showText","state","pars","osource","oresult","forEach","spans","opar","spn","ospan","text","lang","punct","appendChild","showPopup","compound","chains","JSON","parse","dataset","err","upper","closest","oul","oambi","body","remove","bottom","createPopup","oline","ambi","stringify","docs","showCompound","chain","owf","showAmbi","queryDBs","trim","retsek","RegExp","query","replace","lastsek","last","ipcRenderer","send","on","event","parsePhrase","hideProgress","cloneErr","progress","showActiveDicts","cfg","dnames","map","cf","mess","otable","dict","dname","otr","odt","capitalize","firstdict","oactive","active","check","checkmark","activedict","ocsv","csv","setAttribute","rdbs","defaults","locals","installed","uniq","concat","rdb","osize","size","oink","clone","showRemoteDicts","navigate","section","path","PouchDB","plugin","app","upath","getAppPath","getPath","Mousetrap","getCurrentWindow","split","history","hstate","hideAll","sectionId","showSection","old","push","sizes","mono","collapse","setSizes","set","Split","gutterSize","cursor","minSize","onDragEnd","reload","addEventListener","ev","twoPanes","sections","Array","which","goLeft","goRight","csvpath","serverAuth","skip_setup","localpath","resolve","sync","live","retry","signUp","response","then","signup","scrollPane","axios","clipboard","dialog","container","link","import","cloneNode","oldver","newver","over","verTxt","catch","error","shiftKey","delta","deltaY","opane","scrollTop","scanDir","fns","datapath","importCSV","target","parent","parentElement","contains","href","shell","openExternal","find","rest","reject","unshift","moveDictFirst","activateDict","id","showOpenDialog","properties","filters","extensions","ctrlKey","popup","wf","doc","weight","sortBy","odict","odname","oarticle","trns","trn","showResults","ohover","sband","cumulative","trnanscript","cholok","ncoords","otrans","showCholok","txt","readText","startWatching"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","module.exports = require(\"electron\");","module.exports = require(\"lodash\");","//\n\nexport const tibsyms = {\n  tsek: '་'\n  // connective: 'འི',\n  // subordinative: 'ར', // ladon\n  // narrative: 'འོ',\n  // interrog: 'འམ',\n  // coupling: 'འི',\n  // ergative: 'ས',\n  // concessive: 'འང'\n}\n\nexport const tibsuff = ['འི', 'ར', 'འོ', 'འམ', 'འི', 'ས', 'འང']\n","module.exports = require(\"path\");","module.exports = require(\"speckled-band\");","module.exports = require(\"electron-settings\");","module.exports = require(\"electron-is-dev\");","module.exports = require(\"pouchdb\");","module.exports = require(\"debug\");","//\nimport _ from 'lodash'\nimport {tsek, shad, letter, lower, ralasa, yaralaa, vowel, wasur, kanatanapamaaralasa, kanapamara, tanalasa, tasa, umlaut, sa, sama, maa, la, a, voiced, nasalHigh, up2rows} from './lib/data'\nlet log = console.log\nlet debug = require('debug')('app')\n\nexport default function cholok(str, cumul) {\n  let result  = []\n  let segs = segments(str)\n  segs.forEach((seg, idx)=> {\n    if (seg.tib) {\n      let res = syllable(seg)\n      let trl = translit(res, cumul)\n      result.push(trl)\n    } else {\n      result.push(seg.space)\n    }\n  })\n  return result.join('')\n}\n\nfunction syllable(seg) {\n  let point\n  let syms = seg.tib\n  let main, mains = []\n  let prefix, superfix, prefs = []\n  let suffix, secsuf, avow\n  let sufs = []\n  let quest\n\n  let ult = _.last(syms)\n  let penult = syms[syms.length-2]\n  // if (syms.length > 3 && isVowel(ult)) {\n  if (isVowel(ult)) {\n    if (a == penult) {\n      avow = ult\n      syms.pop()\n    }\n  } else if (penult == a && ult == maa[0]) {\n    syms.pop()\n    syms.pop()\n    quest = {trl: 'am'}\n  }\n\n  let vows = _.intersection(syms, _.keys(vowel))\n  let vow, indexVow\n  if (vows.length == 1) vow = vows[0], indexVow = syms.indexOf(vow)\n  else if (vows.length > 1) return {errs: ['TOO MANY VOWELS']}\n\n  let isWasur = syms.includes(wasur)\n\n  let lowers = _.intersection(syms, _.keys(lower))\n  let subfixes = _.intersection(syms, yaralaa)\n  let subfix, indexSubfix\n  if (subfixes.length == 1) subfix = subfixes[0], indexSubfix = syms.indexOf(subfix)\n\n  if (isWasur) { // རྭ་ // རྩྭ་\n    let indWasur = syms.indexOf(wasur)\n    point = 'wasur'\n    main = syms[indWasur - 1]\n    prefix = syms[indWasur - 2]\n    sufs = syms.slice(indWasur+1)\n  } else if (lowers.length) {\n    point = 1\n    let firstLow = lowers[0]\n    let indexFirstLow = syms.indexOf(firstLow)\n    prefs = syms.slice(0, indexFirstLow)\n    if (vow && subfix) { // ex: རྡྱོག་ ; འརྡྱོག་\n      point = 'vow&&sub'\n      subfix = syms[indexVow - 1]\n      main = syms[indexVow - 2]\n      prefs = syms.slice(0, indexVow - 2)\n      sufs = syms.slice(indexVow+1)\n    } else if (vow) { // superfix: // ex: རྡོག་\n      point = 3\n      main = syms[indexVow - 1]\n      prefs = syms.slice(0, indexVow - 1)\n      sufs = syms.slice(indexVow+1)\n    } else if (subfix) { // ex:     // ex: ཤསྟྲ་\n      point = 'sub'\n      main = syms[indexSubfix - 1]\n      prefs = syms.slice(0, indexSubfix - 1)\n      sufs = syms.slice(indexSubfix+1)\n    } else { // superfixes:  // རྐ་ // རྡག་ // འརྡག་ // རྣ་ // ལྒ་ // ཤྰསྟྲ\n      point = 4\n      let lowLast = lowers.slice(-1)[0]\n      let indexLowLast = syms.indexOf(lowLast)\n      main = syms[indexLowLast]\n      prefs = syms.slice(0, indexLowLast)\n      sufs = syms.slice(indexLowLast+1)\n    }\n  } else if (subfix) { // no lowers // ex: ཁྱི་ ka-yatak-kiku // but not གིྱ ka-kiku-yatak // ཁྱིས་ //  འཁྱིས་  // ex: ཁྱ་ // སྲ་ // མྲ་\n    point = 8\n    main = syms[indexSubfix - 1]\n    prefs = syms.slice(0, indexSubfix - 1)\n    if (vow) {\n      sufs = syms.slice(indexVow+1)\n    } else {\n      sufs = syms.slice(indexSubfix+1)\n    }\n    if (main == a) { // བྱའུ་\n    }\n  } else { // no lowers, no subfixed, no superfix\n    if (vow) { // ex: དོགས་\n      point = 5\n      main = syms[indexVow-1]\n      prefs = syms.slice(0, indexVow-1) // up to vow\n      sufs = syms.slice(indexVow+1)\n      if (main == a) { // དགའོ་\n      }\n    } else { // ex: དགས་\n      point = 6\n      if (syms.length > 4) throw new Error('TOO MANY SYMS IN PLAIN WF')\n      if (syms.length == 1) main = syms[0] // ex: ད་\n      else if (syms.length == 2) { //  དས་ // རག་ // གད་// མས་\n        point = 7\n        main = syms[0]\n        suffix = syms[1]\n      } else if (syms.length == 3 || syms.length == 4) { // prefixes: // ex: འདགས་\n        point = 9\n        prefix = syms[0]\n        main = syms[1]\n        sufs = syms.slice(2)\n      }\n    }\n  }\n\n  if (prefs && prefs.length) {\n    if (prefs.length == 2) {\n      prefix = prefs[0]\n      if (ralasa.includes(prefs[1])) superfix = prefs[1]\n    }\n\n    else if (prefs && prefs.length == 1) {\n      if (ralasa.includes(prefs[0])) superfix = prefs[0]\n      else prefix = prefs[0]\n    }\n  }\n\n  if (sufs && sufs.length) {\n    if (sufs.length == 2) suffix = sufs[0], secsuf = sufs[1]\n    else if (sufs.length == 1) suffix = sufs[0]\n  }\n\n  let data = {point: point, prefix: prefix, superfix: superfix, main: main, subfix: subfix, vow: vow, suffix: suffix, secsuf: secsuf, errs: [], syms: syms} // , isWasur: isWasur\n  if (isWasur) data.wasur = true\n  if (avow) data.avow = avow\n  if (quest) data.quest = quest\n\n  for (let key in data) {\n    if (!data[key]) delete data[key]\n  }\n  if (prefs && prefs.length > 2) {\n    data.errs.push('TOO MANY PREFS')\n    // throw new Error('TOO MANY PREFS')\n  }\n  if (subfixes.length > 1) {\n    data.errs.push('TOO MANY SUBFIXES')\n  }\n\n  if (sufs.length > 2) {\n    data.errs.push('TOO MANY SUFFIXES')\n  }\n  if (!main) {\n    data.errs.push('NO MAIN!')\n  }\n\n  return data\n}\n\nfunction translit(data, cumul) {\n  debug('DATA:', data)\n  if (data.errs.length) {\n    return 'unreal sequence'\n  }\n  let res = {}\n  let stack = []\n  let main\n  if (data.prefix) {\n    let pref = letter[data.prefix]\n\n    main = getLetter(data.main)\n    if (main.col == 3) main.trl = voiced[main.row]\n    else if (main.col == 4 && main.row < 5) main.trl = nasalHigh[main.row]\n    let apref = [pref.trl, 'ao'].join('')\n    if (maa.includes(data.prefix)) {\n      main.trl = ['`', main.trl].join('') // 'n'  '  ’  °'  ???\n    }\n    if (a == data.prefix) {\n      apref = [pref.trl, 'o'].join('')\n    } else {\n      apref = [pref.trl, 'ao'].join('')\n    }\n    if (data.prefix == 'ད' && data.main == 'བ') main.trl = 'w' // excl: p->w\n    stack.push(apref)\n  }\n\n  if (data.superfix) {\n    let superfix = letter[data.superfix]\n    let asuperfix = [superfix.trl, 'a'].join('')\n    stack.push(asuperfix)\n    main = getLower(data.main)\n    if (main.col == 3) main.trl = voiced[main.row]\n    else if (main.col == 4) main.trl = nasalHigh[main.row]\n    let amain = [main.trl, 'a'].join('')\n    let maintak = [amain, 'tak'].join('')\n    stack.push(maintak)\n    if (superfix.trl == 'l' && main.trl == 'h') main.trl = 'hl' // excl: l-h -> h-l\n  } else {\n    if (!main) main = getLetter(data.main)\n  }\n\n  res.main = main\n  let amain = [main.trl, 'a'].join('')\n  stack.push(amain)\n\n  if (data.wasur) stack.push('wasur')\n\n  if (data.subfix) {\n    let subfix = lower[data.subfix]\n    let asub = [subfix.trl, 'a'].join('')\n    let asubtak = [asub, 'tak'].join('')\n    stack.push(asubtak)\n    if (data.subfix == 'ྱ') { // YA\n      if (main.row == 4) {\n        res.main.trl = up2rows[main.col]\n        if (data.prefix == 'ད' && data.main == 'བ') { // excl: p->w->ya\n          main.trl = 'y'\n        }\n      } else {\n        res.main.trl = [res.main.trl, subfix.trl].join('')\n      }\n    } else if (data.subfix ==   'ླ') { // LA\n      if (data.main == 'ཟ') res.main.trl = 'nd'\n      else res.main.trl = 'l'\n    } if (data.subfix == 'ྲ') { // RA\n      if (sama.includes(data.main)) {\n        //\n      } else if ([1,3].includes(main.row)) {\n        res.main.trl = 'ṫ'\n      }\n    }\n    stack.push(pretty(res))\n  }\n  // debug('________BEFORE', stack)\n  if (data.vow) {\n    let vow = _.clone(vowel[data.vow])\n    stack.push(vow.descr)\n    if (data.prefix == 'ད' && data.main == 'བ' && !data.subfix) main.trl = '' // excl: p->w->u\n    let mainvow = [main.trl, vow.trl].join('')\n    res.vow = vow\n    stack.push(mainvow)\n  } else {\n    res.vow = {trl: 'a'}\n  }\n  if (data.suffix) {\n    let suffix = getLetter(data.suffix) //_.clone(letter[data.suffix])\n    res.suffix = suffix\n\n    if (data.avow) {\n      let avow = vowel[data.avow]\n      debug('Avow', avow, 'Stack', stack, 'Res', res)\n      if (data.suffix == a) {\n        res.vow = null\n        stack.push(res.suffix.trl)\n        stack.push(avow.descr)\n        stack.push(avow.trl)\n        if (avow.trl == 'i') {\n          res.suffix.trl = 'ä:'\n        } else {\n          res.suffix.trl = avow.trl\n        }\n      }\n      debug('Stack2', stack)\n      debug('PRETTY', pretty(res))\n    } else {\n      let asuf = [suffix.trl, 'a'].join('')\n      if (kanapamara.includes(data.suffix)) {\n        //\n      } else if (tanalasa.includes(data.suffix)) {\n        res.vow.trl = umlaut[res.vow.trl] || res.vow.trl\n      } else if (a == data.suffix) {\n        asuf = suffix.trl\n      } else {\n        return 'IMPOSSIBLE SUFFIX'\n      }\n      stack.push(asuf)\n    }\n\n    if (tasa.includes(data.suffix)) res.suffix = null\n    if (data.secsuf) {\n      let secsuf = letter[data.secsuf]\n      let asecsuf = [secsuf.trl, 'a'].join('')\n      stack.push(asecsuf)\n    }\n    stack.push(pretty(res))\n  }\n\n  let trl = (cumul) ? stack.join('-') : pretty(res)\n  if (data.quest) trl = [trl, data.quest.trl].join('')\n  trl = trl.replace('aa', 'a').replace('aä', 'ä') //.replace(/\\.$/, '')\n  return trl\n}\n\nfunction pretty(res) {\n  if (!res.vow) res.vow = {trl: 'a'}\n  let str = res.main.trl\n  str = [str, res.vow.trl].join('')\n  if (res.suffix) str = [str, res.suffix.trl].join('')\n  return str\n}\n\nfunction getLetter(str) {\n  let tmp = letter[str]\n  let res\n  if (tmp) res = _.clone(tmp)\n  else res = {trl: str}\n  return res\n}\n\nfunction getLower(str) {\n  let tmp =lower[str]\n  let res\n  if (tmp) res = _.clone(tmp)\n  else res = {trl: str}\n  return res\n}\n\nfunction segments (str) {\n  let syms = str.split('')\n  let segs = []\n  let seg = []\n  syms.forEach(sym=> {\n    if (letter[sym] || lower[sym] || vowel[sym]) {\n      seg.push(sym)\n    } else {\n      if (seg.length) segs.push({tib: seg})\n      seg = []\n      let space\n      if (sym == tsek) space =  {space: '.'}\n      else if (sym == shad) space =  {space: '|'}\n      else space = {space: sym}\n      segs.push(space)\n    }\n  })\n  if (seg.length) segs.push({tib: seg})\n  return segs\n}\n\nfunction isVowel(sym) {\n  return _.keys(vowel).includes(sym)\n}\n","module.exports = require(\"electron-clipboard-extended\");","module.exports = require(\"slash\");","module.exports = require(\"split.js\");","module.exports = require(\"util\");","//\n\nexport const tsek = '་'\nexport const shad = '།'\nexport const ralasa = ['ར', 'ལ', 'ས']\n// export const yaralaa = ['ཡ', 'ར', 'ལ', 'འ']\nexport const kanatanapamaaralasa = ['ག', 'ང', 'ད', 'ན', 'བ', 'མ', 'འ', 'ར', 'ལ', 'ས' ]\nexport const kanapamara = ['ག', 'ང', 'བ', 'མ', 'ར' ]\nexport const tanalasa = ['ད', 'ན', 'ལ', 'ས' ]\nexport const tasa = ['ད', 'ས' ]\nexport const sa = ['ས' ] // secfuffixes\nexport const maa = ['མ', 'འ']\nexport const a = 'འ'\nexport const sama = ['ས' , 'མ']\nexport const la = ['ལ']\nexport const yaralaa = ['ྱ', 'ྲ', 'ླ', 'ྰ'] // subjoined\nexport const wasur = 'ྭ'\nexport const umlaut = {a: 'ä', u: 'ü', o: 'ö'} // ä\nexport const voiced = {1: 'g', 2: 'j', 3: 'd', 4: 'b', 5: 'dz'}\nexport const nasalHigh = {1: 'ŋ', 2: 'ñ', 3: 'n', 4: 'm'}\nexport const up2rows = {1: 'c', 2: 'cʰ', 3: 'c̣ʰ', 4: 'ṇ̃'}\n\nexport const letter = {}\nexport const lower = {}\nexport const vowel = {}\nlower['ྐ'] = {trl: 'k', row: 1, col: 1}  //    \tྐ\nlower['ྑ'] = {trl: 'kʰ', row: 1, col: 2} //     \tྑ\nlower['ྒ'] = {trl: 'ḳʰ', row: 1, col: 3} //   \tྒ\nlower['ྔ'] = {trl: 'ŋ', row: 1, col: 4}  //     ྔ\nlower['ྕ'] = {trl: 'c', row: 2, col: 1}  //    ྕ\nlower['ྖ'] = {trl: 'cʰ', row: 2, col: 2}  //     ྖ\nlower['ྗ'] = {trl: 'c̣ʰ', row: 2, col: 3} //       ྗ\nlower['ྙ'] = {trl: 'ṇ̃', row: 2, col: 4} //    ྙ\nlower['ྟ'] = {trl: 't', row: 3, col: 1}  //    ྟ\nlower['ྠ'] = {trl: 'tʰ', row: 3, col: 2} //    ྠ\nlower['ྡ'] = {trl: 'ṭʰ', row: 3, col: 3} //    ྡ\nlower['ྣ'] = {trl: 'n', row: 3, col: 4}  //    ྣ\nlower['ྤ'] = {trl: 'p', row: 4, col: 1} //    ྤ\nlower['ྥ'] = {trl: 'pʰ', row: 4, col: 2} //    ྥ\nlower['ྦ'] = {trl: 'p̣ʰ', row: 4, col: 3} //    ྦ\nlower['ྨ'] = {trl: 'ṃ', row: 4, col: 4} //    ྨ\nlower['ྩ'] = {trl: 'ç', row: 5, col: 1} //    ྩ\nlower['ྪ'] = {trl: 'çʰ', row: 5, col: 2} //     ྪ\nlower['ྫ'] = {trl: 'ç̣ʰ', row: 5, col: 3} //     ྫ\n\nlower['ྱ'] = {trl: 'y', row: 6, col: 4} //     ྱ\nlower['ྲ'] = {trl: 'r', row: 7, col: 1} //    ྲ\nlower['ླ'] = {trl: 'l', row: 7, col: 2} //    ླ\nlower['ྷ'] = {trl: 'h', row: 8, col: 1} //    ྷ\nlower[''] = {trl: '', row: 1, col: 1}\nlower[''] = {trl: '', row: 1, col: 1}\n\n//   ྱ   d  fྱ\n\nletter['ཀ'] = {trl: 'k', row: 1, col: 1}\nletter['ཁ'] = {trl: 'kʰ', row: 1, col: 2}\nletter['ག'] = {trl: 'ḳʰ', row: 1, col: 3}\nletter['ང'] = {trl: 'ŋ', row: 1, col: 4} // lower dot?\nletter['ཅ'] = {trl: 'c', row: 2, col: 1}\nletter['ཆ'] = {trl: 'cʰ', row: 2, col: 2}\nletter['ཇ'] = {trl: 'c̣ʰ', row: 2, col: 3}\nletter['ཉ'] = {trl: 'ñ', row: 2, col: 4} // lower dot?\nletter['ཏ'] = {trl: 't', row: 3, col: 1}\nletter['ཐ'] = {trl: 'tʰ', row: 3, col: 2}\nletter['ད'] = {trl: 'ṭʰ', row: 3, col: 3}\nletter['ན'] = {trl: 'n', row: 3, col: 4} // lower dot?\nletter['པ'] = {trl: 'p', row: 4, col: 1}\nletter['ཕ'] = {trl: 'pʰ', row: 4, col: 2}\nletter['བ'] = {trl: 'p̣ʰ', row: 4, col: 3}\nletter['མ'] = {trl: 'm', row: 4, col: 4} // lower dot?\n\nletter['ཙ'] = {trl: 'ç', row: 5, col: 1}\nletter['ཚ'] = {trl: 'çʰ', row: 5, col: 2}\nletter['ཛ'] = {trl: 'ç̣ʰ', row: 5, col: 3}\nletter['ཝ'] = {trl: 'w', row: 5, col: 4}\n\nletter['ཞ'] = {trl: 'ṣ̂', row: 6, col: 1}\nletter['ཟ'] = {trl: 'ṣ', row: 6, col: 2}\nletter['འ'] = {trl: 'a', row: 6, col: 3} // lower dot?\nletter['ཡ'] = {trl: 'y', row: 6, col: 4} // lower dot?\n\nletter['ར'] = {trl: 'r', row: 7, col: 1} // lower dot?\nletter['ལ'] = {trl: 'l', row: 7, col: 2} // lower dot?\nletter['ཤ'] = {trl: 'ŝ', row: 7, col: 3}\nletter['ས'] = {trl: 's', row: 7, col: 4}\nletter['ཧ'] = {trl: 'h', row: 8, col: 1}\nletter['ཨ'] = {trl: 'a', row: 8, col: 2}\n// letter[''] = {trl: '', row: 6, col: 1}\n\n/*\n ཀ \tka \tཁ \tkʰa \tག \tḳʰa\tང \tŋa\n  ཅ \tca \tཆ \tcʰa \tཇ \tc̣ʰa \tཉ \tṇ̃a\n  ཏ \tta \tཐ \ttʰa \tད \tṭʰa \t ན \tna\n  པ \tpa \tཕ \tpʰa \tབ \tp̣ʰa \tམ \tṃa\n  ཙ \tça \tཚ \tçʰa \tཛ \tç̣ʰa \tཝ \tẉa\n  ཞ \tṣ̂a \tཟ \tṣa \tའ \ta  \tཡ \tya\n  ར \tra \tལ \tla \tཤ \tŝa \tས \tsa\n  ཧ \tha \tཨ \ta\n\n*/\n\n\nvowel['ཱ'] = {trl: 'a', descr: 'a-chung'} //    \t ཱ - subscript a, vowel-lengthening mark\nvowel['ི'] = {trl: 'i', descr: 'kiku'}\nvowel['ུ'] = {trl: 'u', descr: 'ŝapkyu'}\nvowel['ོ'] = {trl: 'o', descr: 'naro'}\nvowel['ེ'] = {trl: 'e', descr: 'ḋeŋbu'}\n","module.exports = require(\"pouchdb-authentication\");","module.exports = require(\"mousetrap\");","module.exports = require(\"json5\");","module.exports = require(\"axios\");","import _ from 'lodash'\n\nlet util = require('util')\n\nexport function q (sel) {\n  return document.querySelector(sel)\n}\n\nexport function qs (sel) {\n  return document.querySelectorAll(sel)\n}\n\nexport function create (tag, style) {\n  let el = document.createElement(tag)\n  if (style) el.classList.add(style)\n  return el\n}\n\nexport function recreateDiv (sel) {\n  let el = document.querySelector(sel)\n  if (el) el.parentElement.removeChild(el)\n  el = document.createElement('div')\n  el.classList.add(sel)\n  // el.id = sel\n  return el\n}\n\nexport function recreate (element) {\n  var newElement = element.cloneNode(true)\n  element.parentNode.replaceChild(newElement, element)\n}\n\n// function cret (str) {\n//   return document.createTextNode(str)\n// }\n\nexport function span (str, style) {\n  let el = document.createElement('span')\n  el.textContent = str\n  if (style) el.classList.add(style)\n  return el\n}\n\nexport function br () {\n  let oBR = document.createElement('br')\n  return oBR\n}\n\nexport function div (str, style) {\n  let el = document.createElement('div')\n  el.textContent = str\n  if (style) el.classList.add(style)\n  return el\n}\n\nexport function p (str, style) {\n  let el = document.createElement('p')\n  el.textContent = str\n  if (style) el.classList.add(style)\n  return el\n}\n\nexport function empty (el) {\n  if (!el) return\n  while (el.hasChildNodes()) {\n    el.removeChild(el.lastChild)\n  }\n}\n\nexport function remove (el) {\n  if (!el) return\n  el.parentElement.removeChild(el)\n}\n\nexport function removeAll (sel) {\n  let els = document.querySelectorAll(sel)\n  els.forEach(el => { el.parentElement.removeChild(el) })\n}\n\n// function closeAll() {\n//     words = null\n//     // window.close()\n//     ipcRenderer.send('sync', 'window-hide')\n// }\n\nexport function findAncestor (el, cls) {\n  while ((el = el.parentElement) && el.classList.contains(cls)) {\n    return el\n  }\n}\n\nexport function plog () {\n  var vs = _.values(arguments)\n  if (vs.length === 1) vs = vs[0]\n  // console.log(util.inspect(vs, {showHidden: false, depth: null}))\n  console.log(util.inspect(vs, {showHidden: false, depth: 3}))\n}\n\nexport function getCoords (el) {\n  let rect = el.getBoundingClientRect()\n  return rect\n  // return {top: rect.top, left: rect.left}\n}\n\nexport function placePopup (coords, el) {\n  let top = [coords.top, 'px'].join('')\n  let left = [coords.left, 'px'].join('')\n  el.style.top = top\n  el.style.left = left\n}\n\n// https://stackoverflow.com/questions/24538450/get-element-currently-under-mouse-without-using-mouse-events\nexport function getInnermostHovered() { return [].slice.call(document.querySelectorAll(':hover')).pop(); }\n","//\nimport _ from 'lodash'\nimport { q, qs, empty, create, remove, span, p, div, getCoords, placePopup, getInnermostHovered } from './utils'\nimport cholok from '../../../cholok'\nimport { tibsyms, tibsyls } from \"./tibetan_data\";\nimport { ipcRenderer } from \"electron\";\nconst settings = require('electron').remote.require('electron-settings')\n\nlet tsek = tibsyms.tsek\nconst log = console.log\n\nexport function showText(state) {\n  let pars = state.pars\n  let osource = q('#source')\n  let oresult = q('#result')\n  empty(osource)\n  empty(oresult)\n\n  pars.forEach(spans => {\n    let opar = p()\n    opar.classList.add('tibpar')\n    spans.forEach(spn => {\n      let ospan = span(spn.text)\n      if (spn.lang) ospan.classList.add('tibphrase') // , wfs.push(spn.text)\n      else if (spn.punct) ospan.classList.add('punct') //, wfs.push(spn.text)\n      else ospan.classList.add('space')\n      opar.appendChild(ospan)\n    })\n    osource.appendChild(opar)\n  })\n\n  let grs = qs('span.tibetan')\n  // if (grs.length == 1) showResults(grs[0].textContent)\n}\n\nexport function showCholok(el, cumulative) {\n  let coords = getCoords(el)\n  let trnanscript = (cumulative) ? cholok(el.textContent, true) : cholok(el.textContent)\n  let ncoords = {top: coords.top - 40, left: coords.left + 15}\n  let otrans = q('#transcript')\n  otrans.textContent = trnanscript\n  otrans.classList.remove('is-hidden')\n  placePopup(ncoords, otrans)\n}\n\nexport function parsePhrase(el, chain, lastsek) {\n  if (!el) return\n  el.textContent = ''\n  chain.forEach((seg, idx)=> {\n    let ospan\n    if (seg.ambi) {\n      ospan = span(seg.seg, 'tibambi')\n      ospan.dataset.chains = JSON.stringify(seg.chains)\n    } else if (seg.docs.length) {\n      ospan = span(seg.seg, 'tibwf')\n      ospan.dataset.docs = JSON.stringify(seg.docs)\n    } else {\n      ospan = span(seg.seg, 'tibphrase')\n    }\n    el.appendChild(ospan)\n    if (idx < chain.length-1) el.appendChild(span(tsek, 'tsek'))\n  })\n  if (lastsek) el.appendChild(span(tsek, 'tsek'))\n}\n\nfunction createPopup(el, upper) {\n  let oambi\n  if (upper) {\n    oambi = create('div', 'popup')\n    oambi.classList.add('upper')\n    document.body.appendChild(oambi)\n  } else oambi = q('#ambi')\n\n  let coords = getCoords(el)\n  empty(oambi)\n  oambi.classList.remove('is-hidden')\n  let ncoords = {top: coords.bottom-3, left: coords.left}\n  placePopup(ncoords, oambi)\n  let oul = create('ul', 'ambilist')\n  oambi.appendChild(oul)\n  return oul\n}\n\nexport function showPopup(el, compound) {\n  let chains\n  try {\n    chains = JSON.parse(el.dataset.chains)\n  } catch(err) {\n    log('ERR: JSON chains', el) // ================== ошибка есть\n    return\n  }\n  let upper = (el.closest('.tibpar')) ? false : true\n  let oul = createPopup(el, upper)\n  // if (el.classList.contains('tibambi')) showAmbi(oul, chains)\n  // else if (el.classList.contains('tibwf')) showCompound(oul, chains)\n  if (compound) showCompound(oul, chains)\n  else showAmbi(oul, chains)\n}\n\nfunction showAmbi(oul, chains) {\n  oul.classList.add('danger')\n  chains.forEach(chain=> {\n    let oline = create('li', 'ambiline')\n    oul.appendChild(oline)\n    chain.forEach(seg=> {\n      let owf = (seg.docs.length) ? span(seg.seg, 'tibwf') : span(seg.seg, 'tibphrase')\n      if (seg.docs.length) owf.dataset.docs = JSON.stringify(seg.docs)\n      oline.appendChild(owf)\n    })\n  })\n}\n\nfunction showCompound(oul, chains) {\n  // log('COMPOUND', chains)\n  chains.forEach(seg=> {\n    let oline = create('li', 'ambiline')\n    oul.appendChild(oline)\n    let ospan\n    if (seg.ambi) {\n      ospan = span(seg.seg, 'tibambi')\n      ospan.dataset.chains = JSON.stringify(seg.chains)\n    } else if (seg.docs.length) {\n      ospan = span(seg.seg, 'tibwf')\n      ospan.dataset.docs = JSON.stringify(seg.docs)\n    } else {\n      ospan = span(seg.seg, 'tibphrase')\n    }\n    oline.appendChild(ospan)\n  })\n}\n\nexport function showResults(el) {\n  let osource = q('#source')\n  let oresult = q('#result')\n  empty(oresult)\n  let wf = el.textContent\n\n  let docs = JSON.parse(el.dataset.docs)\n  try {\n    docs = JSON.parse(el.dataset.docs)\n  } catch(err) {\n    log('ERR: JSON docs', err)\n    return\n  }\n\n  let cfg = settings.get('cfg')\n  // let str = JSON.parse(JSON.stringify(cfg))\n  // log('SHOW RESULTS: cfg', str)\n\n  docs.forEach(doc=> { doc.weight = _.find(cfg, dict=> { return doc.dname == dict.dname }).idx })\n  docs = _.sortBy(docs, 'weight')\n  // log('RESULT docs', wf, docs)\n\n  let odict = create('div', 'dict')\n  oresult.appendChild(odict)\n  let owf = create('p', 'dict-wf')\n  owf.textContent = wf\n  odict.appendChild(owf)\n  docs.forEach(doc=> {\n    let odname = create('p', 'dict-dname')\n    odname.textContent = doc.dname\n    odict.appendChild(odname)\n    let oarticle = create('p', 'dict-article')\n    oarticle.textContent = doc.dict\n    odict.appendChild(oarticle)\n    let oul = create('ul', 'dict-ul')\n    odict.appendChild(oul)\n    if (!doc.trns) log('NO TRNS', doc)\n    if (!doc.trns) return\n    doc.trns.forEach(trn=> {\n      let oline = create('li', 'dict-line')\n      oline.textContent = trn\n      oul.appendChild(oline)\n    })\n  })\n}\n\n\nexport function noResult(el) {\n  // log('NO RESULT')\n  // let oresult = q('#result')\n  // empty(oresult)\n}\n\nlet xxx = function(n,o,u) {\n  if (n._id && !n._id.indexOf(\"_local/\")) return;\n  if (!u || !u.roles || u.roles.indexOf(\"_admin\") == -1) { throw({forbidden:'Denied.' })}\n}\n\n\n// ======================= DBS ==============================\n\nexport function queryDBs(el, compound) {\n  let progress = q('#progress')\n  progress.classList.remove('is-hidden')\n  let text = el.textContent.trim()\n  let retsek = new RegExp(tsek+'$')\n  let str = text.replace(retsek, '')\n  let last = _.last(text)\n  let lastsek = (last == tsek) ? true : false\n  let query = {str: str, compound: compound, lastsek: lastsek}\n  ipcRenderer.send('queryDBs', query)\n}\n\nipcRenderer.on('replayDBs', function (event, query) {\n  let progress = q('#progress')\n  progress.classList.add('is-hidden')\n  let chain = query.chain\n  let el = getInnermostHovered()\n  if (!chain) {\n    noResult(el)\n    return\n  }\n  if (query.compound) {\n    el.dataset.chains = JSON.stringify(chain)\n    showPopup(el, true)\n  }\n  else parsePhrase(el, chain, query.lastsek)\n})\n","//\nimport _ from 'lodash'\nimport { ipcRenderer } from \"electron\";\nimport { q, qs, empty, create, remove, span, p, div, getCoords, placePopup } from './utils'\nimport { navigate } from './nav'\n// import { setCfg } from \"../dbs/pouch\";\n\nconst log = console.log\nconst settings = require('electron-settings')\n\nipcRenderer.on('remoteDictsReply', function (event, rdbs) {\n  // let cloneErr = q('#cloneERR')\n  // let progress = q('#progress')\n  // progress.classList.add('is-hidden')\n  // if (rdbs) showRemoteDicts(rdbs)\n  // else cloneErr.classList.remove('is-hidden')\n  hideProgress(rdbs)\n  showRemoteDicts(rdbs)\n})\n\nipcRenderer.on('replicateReply', function (event, res) {\n  hideProgress(res)\n  let state = {section: 'activedicts'}\n  navigate(state)\n})\n\nipcRenderer.on('csvReply', function (event, res) {\n  hideProgress(res)\n  let state = {section: 'activedicts'}\n  navigate(state)\n})\n\nipcRenderer.on('cleanupReply', function (event, res) {\n  hideProgress(res)\n  let state = {section: 'clonedicts'}\n  navigate(state)\n})\n\nfunction hideProgress(res) {\n  let cloneErr = q('#cloneERR')\n  let progress = q('#progress')\n  if (res) progress.classList.add('is-hidden')\n  else cloneErr.classList.remove('is-hidden')\n}\n\n\nfunction showRemoteDicts(rdbs) {\n  // let upath = settings.get('upath')\n  let cfg = settings.get('cfg')\n  // log('CLONE DICTS: CFG:', cfg)\n  let defaults = ['_users']\n  let locals = cfg.map(dict=> { return dict.dname })\n  let installed = _.uniq(defaults.concat(locals))\n\n  let otable = q('#server-dicts-table tbody')\n  empty(otable)\n  rdbs.forEach(rdb=> {\n    if (defaults.includes(rdb.dname)) return\n    let otr = create('tr')\n    otable.appendChild(otr)\n    let odt = create('td')\n    otr.appendChild(odt)\n    odt.textContent = _.capitalize(rdb.dname)\n    let osize = create('td', 'dsize')\n    osize.textContent = _.capitalize(rdb.size)\n    otr.appendChild(osize)\n    let oink = create('td', 'link')\n    if (installed.includes(rdb.dname)) {\n      let check = checkmark()\n      oink.appendChild(check)\n    } else {\n      oink.textContent = 'sync'\n    }\n    oink.dataset.clone = rdb.dname\n    otr.appendChild(oink)\n  })\n}\n\nexport function showActiveDicts() {\n  let cfg = settings.get('cfg')\n  let dnames = cfg.map(cf=> { return cf.name })\n  let mess = q('#adictmessage')\n  if (dnames.length) mess.textContent = 'click dict\\'s name to move it first'\n  let otable = q('#local-dicts-table tbody')\n  empty(otable)\n  cfg.forEach(dict=> {\n    let name = dict.dname\n    let otr = create('tr')\n    otable.appendChild(otr)\n    let odt = create('td', 'dictname')\n    otr.appendChild(odt)\n    odt.textContent = _.capitalize(name)\n    odt.dataset.firstdict = name\n    let oactive = create('td', 'active-dict')\n    if (dict.active) {\n      let check = checkmark()\n      oactive.appendChild(check)\n    } else {\n      oactive.textContent = 'activate'\n    }\n    oactive.dataset.activedict = name\n    otr.appendChild(oactive)\n    let ocsv = create('td', 'dictcsv')\n    ocsv.textContent = 'toCSV'\n    ocsv.dataset.csv = name\n    otr.appendChild(ocsv)\n  })\n}\n\nexport function moveDictFirst(dname) {\n  let cfg = settings.get('cfg')\n  let dict = _.find(cfg, dict=> { return dict.dname == dname })\n  let rest = _.reject(cfg, dict=> { return dict.dname == dname })\n  rest.unshift(dict)\n  cfg = rest\n  cfg.forEach((dict, idx)=> { dict.idx = idx })\n  settings.set('cfg', cfg)\n  // setCfg()\n  showActiveDicts()\n}\n\nexport function activateDict(el) {\n  let cfg = settings.get('cfg')\n  let dict = _.find(cfg, dict=> { return dict.dname == el.dataset.activedict })\n  let check = checkmark()\n  if (el.textContent) {\n    el.textContent = ''\n    el.appendChild(check)\n    dict.active = true\n  } else {\n    empty(el)\n    el.textContent = 'activate'\n    dict.active = false\n  }\n  settings.set('cfg', cfg)\n}\n\nfunction checkmark() {\n  let check = create('img', 'dict-check')\n  check.setAttribute('src', '../resources/check.png')\n  return check\n}\n\nexport function parseCSV() {\n  log('PARSE START CSV')\n}\n","//\n\nconst path = require('path')\n\nconst settings = require('electron-settings')\nconst log = console.log\nconst PouchDB = require('pouchdb')\nPouchDB.plugin(require('pouchdb-authentication'));\n\nexport function signup(upath) {\n  let serverAuth = new PouchDB('http://localhost:5984/mydb', {skip_setup: true})\n  let localpath = path.resolve(upath, 'pouch', 'auth')\n  let localDB = new PouchDB(localpath)\n  localDB.sync(serverAuth, {live: true, retry: true}).on('error', console.log.bind(console))\n\n  serverAuth.signUp('batman', 'brucewayne', function (err, response) {\n    if (err) {\n      if (err.name === 'conflict') {\n        // \"batman\" already exists, choose another username\n      } else if (err.name === 'forbidden') {\n        // invalid username\n      } else {\n        // HTTP error, cosmic rays, etc.\n      }\n    }\n  })\n    .then(function(res) {\n      log('SIGNUP RES', res)\n    })\n  return\n}\n","//\nimport _ from \"lodash\"\nimport { ipcRenderer } from \"electron\";\nimport { q, qs, empty, create, remove, span, p, div, enclitic } from './utils'\nimport Split from 'split.js'\nimport { showText } from \"./parsedata\";\nimport { serverDicts, showActiveDicts, parseCSV } from \"./dict\";\nimport { signup } from \"./auth\";\n\nimport { remote } from \"electron\";\nconst app = remote.app;\nconst apath = app.getAppPath()\nconst upath = app.getPath(\"userData\")\n\nconst log = console.log\nconst clipboard = require('electron-clipboard-extended')\nconst settings = require('electron').remote.require('electron-settings')\nconst Mousetrap = require('mousetrap')\nconst path = require('path')\nconst slash = require('slash')\nconst {getCurrentWindow} = require('electron').remote\n\n// let init = {section: 'home'}\nlet history = []\nlet hstate = 0\nlet split\n\nfunction twoPanes(state) {\n\n  let sizes = settings.get('split-sizes') || [50, 50]\n  if (split && state.mono) split.collapse(1)\n  else if (split) split.setSizes(sizes)\n\n  if (split) return\n  settings.set('split-sizes', sizes)\n\n  split = Split(['#source', '#result'], {\n    sizes: sizes,\n    gutterSize: 5,\n    cursor: 'col-resize',\n    minSize: [0, 0],\n    onDragEnd: function (sizes) {\n      settings.set('split-sizes', sizes)\n      getCurrentWindow().reload()\n    }\n  })\n  if (state.mono) split.collapse(1)\n\n  document.addEventListener(\"keydown\", function(ev) {\n    // keyPanes(ev, state)\n  }, false)\n\n  document.addEventListener(\"wheel\", function(ev) {\n    // scrollPanes(ev, state)\n  }, false)\n}\n\n// arrows\nMousetrap.bind(['alt+left', 'alt+right'], function(ev) {\n  if (ev.which == 37) goLeft()\n  else if (ev.which == 39) goRight()\n})\n\nMousetrap.bind(['alt+1', 'alt+2'], function(ev) {\n  // if (ev.which == 49) log('----1')\n  // else if (ev.which == 50) log('----2')\n})\n\nMousetrap.bind(['esc'], function(ev) {\n  // похоже, общий метод не получится\n})\n\nMousetrap.bind(['ctrl+d'], function(ev) {\n  let datapath = '/home/michael/diglossa.texts/Tibetan'\n  ipcRenderer.send('scanLocalDict', datapath)\n})\n\nMousetrap.bind(['ctrl+j'], function(ev) {\n  let csvpath = '/home/michael/tibetan/utils/csv/csvdict.json'\n  log('IMPORT', csvpath)\n  ipcRenderer.send('importcsv', csvpath)\n})\n\nMousetrap.bind(['ctrl+i'], function(ev) {\n  ipcRenderer.send('infoDB', 'csvdict')\n})\n\nMousetrap.bind(['ctrl+v'], function(ev) {\n  ipcRenderer.send('infoDB', 'vasilyev')\n})\n\n\n\nMousetrap.bind(['ctrl+u'], function(ev) {\n  log('CLICK SIGNUP')\n  signup(upath)\n})\n\nfunction goLeft() {\n  if (hstate <= 0) return\n  else hstate--\n  let state = history[hstate]\n  state.old = true\n  hideAll()\n  navigate(state)\n}\n\nfunction goRight() {\n  if (hstate >= history.length-1) return\n  else hstate++\n  let state = history[hstate]\n  state.old = true\n  hideAll()\n  navigate(state)\n}\n\nexport function navigate(state) {\n  try {\n    state = JSON.parse(JSON.stringify(state))\n  } catch (err) {\n    log('NAV-state ERR', err)\n    state = {}\n  }\n  let section = state.section || 'home'\n  if (!section) state.section = 'home'\n  showSection(state.section)\n\n  if (!state.old) {\n    state.old = false\n    delete state.old\n    history.push(state)\n    hstate = history.length-1\n  }\n  if (section == 'main') twoPanes(state), showText(state)\n  else if (section == 'clonedicts') ipcRenderer.send('remoteDicts', '') // serverDicts()\n  else if (section == 'activedicts') showActiveDicts()\n\n  let progress = q('#progress')\n  progress.classList.add('is-hidden')\n\n  // state = {section: 'home'}\n  settings.set('state', state)\n}\n\nfunction showSection(section) {\n  hideAll()\n  const sectionId = ['#', section].join('')\n  q(sectionId).classList.remove('is-hidden')\n  q(sectionId).classList.add('is-shown')\n}\n\nfunction hideAll () {\n  // const sections = document.querySelectorAll('.section')\n  const sections = qs('.section')\n  Array.prototype.forEach.call(sections, (section) => {\n    section.classList.add('is-hidden')\n    section.classList.remove('is-shown')\n  })\n  let otrans = q('#transcript')\n  otrans.classList.add('is-hidden')\n  let oambi = q('#ambi')\n  oambi.classList.add('is-hidden')\n}\n","// import \"./stylesheets/main.css\";\n\nimport _ from \"lodash\";\n// import Split from 'split.js'\nimport { remote } from \"electron\";\nimport { shell } from 'electron'\nimport { ipcRenderer } from \"electron\";\n\nimport { q, qs, empty, create, remove, span, p, div, getInnermostHovered } from './lib/utils'\nimport { navigate } from './lib/nav'\n// import sband from \"../../../sband\"\nimport sband from \"speckled-band\"\nimport { showCholok, showResults, showPopup, queryDBs } from \"./lib/parsedata\"\nimport { moveDictFirst, activateDict } from \"./lib/dict\"\n\nconst settings = require('electron').remote.require('electron-settings')\n// const Mousetrap = require('mousetrap')\n\nconst JSON = require('json5')\nconst axios = require('axios')\n// let fse = require('fs-extra')\nconst slash = require('slash')\nconst log = console.log\n\nconst path = require('path')\n\nconst clipboard = require('electron-clipboard-extended')\nconst {dialog, getCurrentWindow} = require('electron').remote\n\nconst isDev = require('electron-is-dev')\n// const isDev = false\n// const isDev = true\n// const app = remote.app;\nconst code = 'tib'\n\nlet over = q(\"#new-version\")\nlet progress = q('#progress')\n\nlet container = q('#container')\nlet imports = qs('link[rel=\"import\"]')\nimports.forEach(link=> {\n  let content = link.import\n  let section = content.querySelector('.section')\n  container.appendChild(section.cloneNode(true))\n})\n\nipcRenderer.on('version', function (event, oldver) {\n  axios.get('https://api.github.com/repos/mbykov/pecha.js/releases/latest')\n    .then(function (response) {\n      if (!response || !response.data) return\n      let newver = response.data.name\n      if (oldver && newver && newver > oldver) {\n        let over = q(\"#new-version\")\n        let verTxt = ['new version available:', newver].join(' ')\n        over.textContent = verTxt\n        over.classList.remove('is-hidden')\n      }\n    })\n    .catch(function (error) {\n      console.log('API ERR')\n    })\n})\n\nipcRenderer.on('section', function (event, section) {\n  navigate({section: section})\n})\n\n// ctrl-R\nipcRenderer.on('reread', function (event) {\n  let state = settings.get('state')\n  getCurrentWindow().reload()\n  navigate(state)\n})\n\nlet state = settings.get('state')\nif (!state) state = {section: 'home'}\nnavigate(state)\n\ndocument.addEventListener('click', (ev) => {\n  // let progress = q('#progress')\n  let data = ev.target.dataset\n  if (!data) return\n  let parent = ev.target.parentElement\n  if (ev.target.classList.contains('external')) {\n    let href = ev.target.textContent\n    shell.openExternal(href)\n  } else if (data.section) {\n    navigate({section: data.section})\n  } else if (data.clone) {\n    progress.classList.remove('is-hidden')\n    ipcRenderer.send('replicate', data.clone)\n  } else if (data.firstdict) {\n    moveDictFirst(data.firstdict) // ev.target,\n  } else if (data.activedict) {\n    activateDict(ev.target)\n  } else if (data.csv) {\n    progress.classList.remove('is-hidden')\n    ipcRenderer.send('export-to-csv', data.csv)\n  } else if (parent && parent.dataset && parent.dataset.activedict) {\n    // activateDict(parent)\n    // log('activateDict(parent)_______')\n  } else if (ev.target.id == 'cleanupdb') {\n    ipcRenderer.send('cleanupDB')\n  } else if (ev.target.id == 'scandir') {\n    dialog.showOpenDialog( {properties: ['openDirectory'] }, scanDir)\n  } else if (ev.target.id == 'importcsv') {\n    dialog.showOpenDialog({properties: ['openFile'], filters: [{name: 'JSON', extensions: ['json'] }]}, importCSV)\n  } else if (data.docs) {\n    queryDBs(ev.target , true)\n  }\n})\n\ndocument.addEventListener(\"mouseover\", function(ev) {\n  if (!ev.target.textContent) return\n  if (ev.ctrlKey == true) return\n  let tpar = ev.target.closest('.tibpar')\n  if (tpar) hidePopups()\n\n  if (ev.target.classList.contains('tibphrase')) {\n    if (ev.shiftKey == true) {\n      // showCholok(ev.target)\n    } else {\n      queryDBs(ev.target)\n    }\n  } else if (ev.target.classList.contains('tibwf')) {\n    showResults(ev.target)\n  } else if (ev.target.classList.contains('tibambi')) {\n    showPopup(ev.target) // mouseover, tibambi\n  }\n}, false)\n\ndocument.addEventListener(\"mouseleave\", function(ev) {\n  if (!ev.target.classList) return\n  if (ev.ctrlKey == true) return\n  if (ev.target.classList.contains('tibphrase')) {\n    let otrans = q('#transcript')\n    otrans.classList.add('is-hidden')\n  }\n}, false)\n\ndocument.addEventListener(\"keyup\", function(ev) {\n  if (ev.ctrlKey == true) return\n  // hidePopups()\n  let transcript = q('#transcript')\n  transcript.classList.add('is-hidden')\n}, false)\n\ndocument.addEventListener(\"keydown\", function(ev) {\n  // if (ev.ctrlKey == true) return\n  if (ev.shiftKey != true) return\n  let ohover = getInnermostHovered()\n  if (!ohover) return\n  if (ohover.id == 'source') ohover = q('.tibpar')\n  let text = ohover.textContent\n  let pars = sband(text, code)\n  if (!pars) return\n  let cumulative = (ev.ctrlKey == true) ? true: false\n  showCholok(ohover, cumulative)\n  // if (ev.ctrlKey == true) showCholok(ohover, true)\n}, false)\n\ndocument.addEventListener(\"wheel\", function(ev) {\n  scrollPane(ev, state)\n}, false)\n\n\nclipboard\n  .on('text-changed', () => {\n    let txt = clipboard.readText()\n    let pars = sband(txt, code)\n    if (!pars || !pars.length) return\n    let state = {section: 'main', pars: pars}\n    navigate(state)\n  })\n  .startWatching()\n\nfunction hidePopups() {\n  qs('.popup').forEach(popup=> {\n    popup.classList.add('is-hidden')\n  })\n}\n\nexport function scrollPane(ev, state) {\n  if (ev.shiftKey == true) return;\n  let delta = (ev.deltaY > 0) ? 24 : -24\n  let opane = q('.section.is-shown')\n  if (!opane) return\n  opane.scrollTop += delta\n}\n\nfunction scanDir(fns) {\n  if (!fns) return\n  let datapath = fns[0]\n  if (!datapath) return\n  progress.classList.remove('is-hidden')\n  ipcRenderer.send('scanLocalDict', datapath)\n}\n\nfunction importCSV(fns) {\n  if (!fns) return\n  let csvpath = fns[0]\n  if (!csvpath) return\n  progress.classList.remove('is-hidden')\n  ipcRenderer.send('import-from-csv', csvpath)\n}\n\nipcRenderer.on('scanLocalReply', function (event, datapath) {\n  progress.classList.add('is-hidden')\n  let state = {section: 'publish', datapath: datapath}\n  navigate(state)\n})\n"],"sourceRoot":""}